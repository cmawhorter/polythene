{"version":3,"file":"polythene-core-radio-group.js","sources":["../../polythene-css-classes/radio-group.js","../src/radio-group.js"],"sourcesContent":["\nexport default {\n  component: \"pe-radio-group\",\n};\n","import { filterSupportedAttributes, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/radio-group\";\n\nconst getButtons = vnode => {\n  const attrs = vnode.attrs;\n  return attrs.content\n    ? attrs.content\n    : attrs.buttons\n      ? attrs.buttons\n      : attrs.children || vnode.children || [];\n};\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  if (attrs.defaultSelectedValue !== undefined) {\n    deprecation(\"RadioGroup\", { option: \"defaultSelectedValue\", newOption: \"defaultCheckedValue\", since: \"1.4.2\" });\n  }\n  const buttons = getButtons(vnode);\n  const checkedIdx = buttons.reduce((acc, buttonOpts, index) => {\n    if (buttonOpts.value === undefined) {\n      console.error(\"Option 'value' not set for radio button\"); // eslint-disable-line no-console\n    }\n    return acc !== null\n      ? acc\n      : (\n        buttonOpts.defaultChecked !== undefined\n        || (attrs.defaultCheckedValue !== undefined && buttonOpts.value === attrs.defaultCheckedValue)\n        || (attrs.defaultSelectedValue !== undefined && buttonOpts.value === attrs.defaultSelectedValue) // deprecated\n      )\n        ? index\n        : acc;\n  }, null);\n  const checkedIndex = createStream(checkedIdx);\n  return {\n    checkedIndex,\n    redrawOnUpdate: createStream.merge([checkedIndex])\n  };\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, RadioButton }) => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const checkedIndex = state.checkedIndex();\n  const buttons = getButtons(vnode);\n  const groupCheckedValue= attrs.checkedValue;\n\n  return buttons.length\n    ? buttons.map((buttonOpts, index) => {\n      if (!buttonOpts) {\n        return null;\n      }\n      const isChecked = buttonOpts.checked !== undefined\n        ? buttonOpts.checked\n        : groupCheckedValue !== undefined\n          ? buttonOpts.value === groupCheckedValue\n          : checkedIndex === index;\n      return h(RadioButton, Object.assign(\n        {},\n        {\n          /* group attributes that may be overwritten by individual buttons */\n          name: attrs.name,\n          key: buttonOpts.value\n        },\n        attrs.all,\n        /* individual button options */\n        buttonOpts,\n        {\n          /* this component's options */\n          onChange: ({ value }) => (\n            state.checkedIndex(index),\n            attrs.onChange && attrs.onChange({ value })\n          ),\n          checked: isChecked\n        }\n      ));\n    })\n    : null;\n};\n"],"names":["component","getButtons","vnode","attrs","content","buttons","children","getElement","element","getInitialState","createStream","defaultSelectedValue","undefined","deprecation","option","newOption","since","checkedIdx","reduce","acc","buttonOpts","index","value","console","error","defaultChecked","defaultCheckedValue","checkedIndex","redrawOnUpdate","merge","createProps","k","keys","filterSupportedAttributes","className","classes","tone","class","join","createContent","h","renderer","RadioButton","state","groupCheckedValue","checkedValue","length","map","isChecked","checked","name","key","all","onChange"],"mappings":"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"}