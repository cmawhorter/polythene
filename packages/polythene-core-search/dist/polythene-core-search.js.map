{"version":3,"file":"polythene-core-search.js","sources":["../../polythene-css-classes/search.js","../src/search.js"],"sourcesContent":["\nexport default {\n  component:       \"pe-search\",\n\n  // elements\n  content:         \"pe-search__content\",\n\n  // states\n  searchFullWidth: \"pe-search--full-width\",\n  searchInset:     \"pe-search--inset\",\n};\n","import { filterSupportedAttributes } from \"polythene-core\";\nimport classes from \"polythene-css-classes/search\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nconst getNameOfState = state =>\n  state.focus && state.dirty\n    ? \"focus_dirty\"\n    : state.focus\n      ? \"focus\"\n      : state.dirty\n        ? \"dirty\"\n        : \"none\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const searchState = createStream({});\n  return {\n    searchState\n  };\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.fullWidth ? classes.searchFullWidth : classes.searchInset,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, TextField }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const searchState = getNameOfState(state.searchState());\n  const buttons = (attrs.buttons || {})[searchState] || {};\n  const textfieldAttrs = attrs.textfield || {};\n  return h(\"div\",\n    { className: classes.content },\n    [\n      buttons.before,\n      h(TextField, Object.assign(\n        {},\n        textfieldAttrs,\n        {\n          key: \"input\",\n          onChange: newState => {\n            state.searchState(newState);\n            if (textfieldAttrs.onChange) {\n              textfieldAttrs.onChange(newState);\n            }\n          },\n        }\n      )),\n      buttons.after\n    ]\n  );\n};\n"],"names":["component","content","searchFullWidth","searchInset","getElement","vnode","attrs","element","getNameOfState","state","focus","dirty","getInitialState","createStream","searchState","createProps","k","keys","filterSupportedAttributes","className","classes","fullWidth","tone","class","join","events","createContent","h","renderer","TextField","buttons","textfieldAttrs","textfield","before","key","onChange","newState","after"],"mappings":"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"}