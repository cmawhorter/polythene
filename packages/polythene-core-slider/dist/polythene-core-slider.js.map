{"version":3,"file":"polythene-core-slider.js","sources":["../../polythene-css-classes/slider.js","../src/slider.js"],"sourcesContent":["\nexport default {\n  component:      \"pe-slider\",\n\n  // elements\n  control:        \"pe-slider__control\",\n  label:          \"pe-slider__label\",\n  pin:            \"pe-slider__pin\",\n  thumb:          \"pe-slider__thumb\",\n  tick:           \"pe-slider__tick\",\n  ticks:          \"pe-slider__ticks\",\n  track:          \"pe-slider__track\",\n  trackBar:       \"pe-slider__track-bar\",\n  trackBarValue:  \"pe-slider__track-bar-value\",\n  trackPart:      \"pe-slider__track-part\",\n  trackPartRest:  \"pe-slider__track-rest\",\n  trackPartValue: \"pe-slider__track-value\",\n\n  // states\n  hasFocus:       \"pe-slider--focus\",\n  hasPin:         \"pe-slider--pin\",\n  hasTicks:       \"pe-slider--ticks\",\n  hasTrack:       \"pe-slider--track\",\n  isActive:       \"pe-slider--active\",\n  isAtMin:        \"pe-slider--min\",\n  isDisabled:     \"pe-slider--disabled\",\n  tickValue:      \"pe-slider__tick--value\",\n};\n","import { isTouch, pointerStartMoveEvent, pointerMoveEvent, pointerEndMoveEvent, isClient, filterSupportedAttributes, getStyle } from \"polythene-core\";\nimport classes from \"polythene-css-classes/slider\";\n\nconst MAX_TICKS = 100;\nlet focusElement;\n\nconst deFocus = state => {\n  if (focusElement) {\n    focusElement.blur();\n  }\n  focusElement = undefined;\n  state.hasFocus(false);\n};\n\nconst focus = (state, el) => {\n  deFocus(state);\n  focusElement = el;\n  state.hasFocus(true);\n};\n\nconst positionFromEvent = (e, isVertical) => (\n  // isVertical not yet implemented\n  isTouch && e.touches\n    ? isVertical ? e.touches[0].pageY : e.touches[0].pageX\n    : isVertical ? e.pageY : e.pageX);\n\nconst updatePinPosition = state => {\n  if (state.controlEl && state.pinEl) {\n    const left = state.fraction() * state.rangeWidth;\n    state.pinEl.style.left = left + \"px\";\n  }\n};\n\nconst updateValue = (state, value) => {\n  state.setValue(value, true);\n  updatePinPosition(state);\n};\n\nconst generateTickMarks = (h, stepCount, stepSize, value) => {\n  const items = [];\n  const stepWithValue = value / stepSize;\n  let s = 0;\n  while (s < stepCount + 1) {\n    items.push(h(\"div\", {\n      className: s <= stepWithValue\n        ? [classes.tick, classes.tickValue].join(\" \")\n        : classes.tick,\n      key: `tick-${s}`\n    }));\n    s++;\n  }\n  return items;\n};\n\nconst readRangeData = state => {\n  if (state.controlEl && isClient) {\n    // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n    state.controlWidth = parseFloat(getStyle({ element: state.controlEl, prop: \"width\" }));\n    state.rangeWidth = state.trackEl.getBoundingClientRect().width - state.controlWidth;\n    const styles = window.getComputedStyle(state.trackEl);\n    state.rangeOffset = parseFloat(styles.marginLeft);\n  }\n};\n\nconst calculateClickOffset = (state, controlOffset = 0) => {\n  state.clickOffset = state.trackEl.getBoundingClientRect().left - (state.rangeOffset - state.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (state, e) => {\n  const controlPos = state.controlEl.getBoundingClientRect().left;\n  const eventPos = positionFromEvent(e);\n  const controlOffset = eventPos - controlPos - state.controlWidth / 2;\n  calculateClickOffset(state, controlOffset);\n};\n\nconst initTrackEvent = (state) =>\n  calculateClickOffset(state, 0);\n\nconst handlePosEvent = (state, e) => {\n  const pos = positionFromEvent(e) - state.clickOffset;\n  const value = state.min + ((pos - state.rangeOffset) / state.rangeWidth) * (state.max - state.min);\n  updateValue(state, value);\n};\n\nconst startDrag = (state, attrs, e) => {\n  if (state.isDragging()) return;\n  e.preventDefault();\n  state.isDragging(true);\n  state.isActive(true);\n  deFocus(state);\n\n  const drag = e => {\n    if (!state.isDragging()) return;\n    handlePosEvent(state, e);\n  };\n\n  const endDrag = () => {\n    if (!state.isDragging()) return;\n    deFocus(state);\n    if (isClient) {\n      pointerMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, drag));\n      pointerEndMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, endDrag));\n    }\n    state.isDragging(false);\n    state.isActive(false);\n  };\n\n  if (isClient) {\n    pointerMoveEvent.forEach(evt =>\n      window.addEventListener(evt, drag));\n    pointerEndMoveEvent.forEach(evt =>\n      window.addEventListener(evt, endDrag));\n  }\n  readRangeData(state);\n\n  if (attrs.pin) {\n    updatePinPosition(state);\n  }\n};\n\nconst startTrack = (state, attrs, e) => {\n  e.preventDefault();\n  if (state.isDragging()) {\n    return;\n  }\n  readRangeData(state);\n  initTrackEvent(state);\n  handlePosEvent(state, e);\n  startDrag(state, attrs, e);\n};\n\nconst createSlider = (vnode, { h, k, hasTicks, interactiveTrack }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const fraction = state.fraction();\n  const range = state.max - state.min;\n  const stepCount = Math.min(MAX_TICKS, parseInt(range / state.stepSize, 10));\n\n  const onStartTrack = e => (\n    startTrack(state, attrs, e)\n  );\n\n  const onInitDrag = e => {\n    readRangeData(state);\n    initControlEvent(state, e);\n    startDrag(state, attrs, e);\n  };\n\n  const flexValueCss =  fraction + \" 1 0%\";\n  const flexRestValue = 1 - fraction;\n  const flexRestCss =   flexRestValue + \" 1 0%\";\n\n  return h(\"div\",\n    Object.assign(\n      {},\n      { className: classes.track },\n      interactiveTrack && !attrs.disabled && pointerStartMoveEvent.reduce((acc, evt) => (\n        acc[k[`on${evt}`]] = onStartTrack,\n        acc\n      ), {})\n    ),\n    [\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartValue,\n          key: \"trackPartValue\",\n          style: {\n            flex: flexValueCss,\n            msFlex: flexValueCss,\n            WebkitFlex: flexValueCss\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      h(\"div\", Object.assign(\n        {},\n        {\n          className: classes.control,\n          key: \"control\"\n        },\n        attrs.disabled\n          ? { disabled: true }\n          : {\n            [k.tabindex]: attrs[k.tabindex] || 0,\n            [k.onfocus]: () => focus(state, state.controlEl),\n            [k.onblur]: () => deFocus(state),\n            [k.onkeydown]: e => {\n              if (e.key !== \"Tab\") {\n                e.preventDefault();\n              }\n              if (e.key === \"Escape\" || e.key === \"Esc\") {\n                state.controlEl.blur(e);\n              } else if (e.key === \"ArrowLeft\" || e.key === \"ArrowDown\" || e.key === \"Left\" || e.key === \"Down\") {\n                state.decrement(state, e.shiftKey);\n              } else if (e.key === \"ArrowRight\" || e.key === \"ArrowUp\" || e.key === \"Right\" || e.key === \"Up\") {\n                state.increment(state, e.shiftKey);\n              } else if (e.key === \"Home\") {\n                updateValue(state, state.min);\n              } else if (e.key === \"End\") {\n                updateValue(state, state.max);\n              } else if (e.key === \"PageDown\") {\n                state.decrement(state, true);\n              } else if (e.key === \"PageUp\") {\n                state.increment(state, true);\n              }\n              readRangeData(state);\n              updatePinPosition(state);\n            }\n          },\n        !attrs.disabled &&\n          pointerStartMoveEvent.reduce((acc, evt) => (\n            acc[k[`on${evt}`]] = onInitDrag,\n            acc\n          ), {}),\n        attrs.events\n          ? attrs.events\n          : null,\n        hasTicks\n          ? { step: stepCount }\n          : null\n      ),\n      attrs.icon\n        ? h(\"div\",\n          {\n            className: classes.thumb,\n            key: \"icon\"\n          },\n          attrs.icon\n        )\n        : null\n      ),\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartRest,\n          key: \"trackPartRest\",\n          style: {\n            flex: flexRestCss,\n            msFlex: flexRestCss,\n            WebkitFlex: flexRestCss,\n            maxWidth: (flexRestValue * 100) + \"%\" // for IE Edge\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      hasTicks && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.ticks,\n            key: \"ticks\"\n          },\n          generateTickMarks(h, stepCount, state.stepSize, state.value())\n        )\n        : null,\n      hasTicks && attrs.pin && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.pin,\n            key: \"pin\",\n            value: state.value()\n          }\n        )\n        : null\n    ]\n  );\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n\n  const min = attrs.min !== undefined ? attrs.min : 0;\n  const max = attrs.max !== undefined ? attrs.max : 100;\n  const range = max - min;\n  const stepSize = attrs.stepSize !== undefined\n    ? attrs.stepSize\n    : 1;\n  const defaultValue = attrs.defaultValue !== undefined\n    ? attrs.defaultValue\n    : attrs.value !== undefined\n      ? attrs.value\n      : 0;\n  const previousValue = createStream(undefined);\n  const isActive = createStream(false);\n  const hasFocus = createStream(false);\n  const isDragging = createStream(false);\n  const fraction = createStream(min);\n  const value = createStream(0);\n  const normalizeFactor = 1 / stepSize;\n\n  const setValue = (v, shouldNotify = false) => {\n    if (v < min) v = min;\n    if (v > max) v = max;\n    value(stepSize\n      ? Math.round(v * normalizeFactor) / normalizeFactor\n      : v\n    );\n    fraction((value() - min) / range);\n    if (shouldNotify && attrs.onChange) {\n      attrs.onChange({\n        value: value()\n      });\n    }\n    previousValue(v);\n  };\n\n  const increment = (state, useLargeStep) =>\n    updateValue(state, value() + (useLargeStep ? 10 : 1) * (stepSize || 1));\n\n  const decrement = (state, useLargeStep) =>\n    updateValue(state, value() - (useLargeStep ? 10 : 1) * (stepSize || 1));\n  \n  setValue(defaultValue);\n  \n  return {\n    min,\n    max,\n    stepSize,\n    fraction,\n    // DOM elements\n    trackEl: null,\n    controlEl: null,\n    pinEl: null,\n    // functions\n    setValue,\n    increment,\n    decrement, \n    // streams\n    isDragging,\n    isActive,\n    value,\n    previousValue,\n    hasFocus,\n    // coordinates\n    controlWidth: 0,\n    rangeWidth: 0,\n    rangeOffset: 0,\n    clickOffset: 0,\n    redrawOnUpdate: createStream.merge([isActive, value])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.trackEl = dom.querySelector(`.${classes.track}`);\n  state.controlEl = dom.querySelector(`.${classes.control}`);\n  state.pinEl = dom.querySelector(`.${classes.pin}`);\n\n  readRangeData(state);\n\n  if (attrs.pin) {\n    setTimeout(() => {\n      updateValue(state, state.value());\n    }, 0);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.value !== undefined) {\n    if (state.previousValue() !== attrs.value) {\n      state.previousValue(attrs.value);\n      setTimeout(() => state.setValue(state.previousValue()), 0); // perform in next tick to play nice with React\n    }\n  }\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.disabled ? classes.isDisabled : null,\n        attrs.pin ? classes.hasPin : null,\n        interactiveTrack ? classes.hasTrack : null,\n        state.isActive() ? classes.isActive : null,\n        state.hasFocus() ? classes.hasFocus : null,\n        state.fraction() === 0 ? classes.isAtMin : null,\n        hasTicks ? classes.hasTicks : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return createSlider(vnode, { h, k, hasTicks, interactiveTrack });\n};\n\n\n"],"names":["component","control","label","pin","thumb","tick","ticks","track","trackBar","trackBarValue","trackPart","trackPartRest","trackPartValue","hasFocus","hasPin","hasTicks","hasTrack","isActive","isAtMin","isDisabled","tickValue","MAX_TICKS","focusElement","deFocus","state","blur","undefined","focus","el","positionFromEvent","e","isVertical","isTouch","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","h","stepCount","stepSize","items","stepWithValue","s","push","className","classes","join","key","readRangeData","isClient","controlWidth","parseFloat","getStyle","element","prop","trackEl","getBoundingClientRect","width","styles","window","getComputedStyle","rangeOffset","marginLeft","calculateClickOffset","controlOffset","clickOffset","initControlEvent","controlPos","eventPos","initTrackEvent","handlePosEvent","pos","min","max","startDrag","attrs","isDragging","preventDefault","drag","endDrag","pointerMoveEvent","forEach","evt","removeEventListener","pointerEndMoveEvent","addEventListener","startTrack","createSlider","vnode","k","interactiveTrack","range","Math","parseInt","onStartTrack","onInitDrag","flexValueCss","flexRestValue","flexRestCss","disabled","pointerStartMoveEvent","reduce","acc","flex","msFlex","WebkitFlex","tabindex","onfocus","onblur","onkeydown","decrement","shiftKey","increment","events","step","icon","maxWidth","getInitialState","createStream","defaultValue","previousValue","normalizeFactor","v","shouldNotify","round","onChange","useLargeStep","redrawOnUpdate","merge","onMount","dom","querySelector","setTimeout","createProps","keys","filterSupportedAttributes","tone","class","createContent","renderer"],"mappings":"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"}