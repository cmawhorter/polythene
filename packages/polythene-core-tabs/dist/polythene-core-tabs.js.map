{"version":3,"file":"polythene-core-tabs.js","sources":["../../polythene-css-classes/button.js","../../polythene-css-classes/tabs.js","../src/tabs.js","../src/tab.js","../src/scroll-button.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n};\n","import buttonClasses from \"./button\";\n\nexport default {\n  component:            \"pe-tabs\",\n\n  // elements\n  indicator:            \"pe-tabs__indicator\",\n  scrollButton:         \"pe-tabs__scroll-button\",\n  scrollButtonAtEnd:    \"pe-tabs__scroll-button-end\",\n  scrollButtonAtStart:  \"pe-tabs__scroll-button-start\",\n  tab:                  \"pe-tab\",\n  tabContent:           \"pe-tabs__tab-content\",\n  tabRow:               \"pe-tabs__row\",\n\n  // states\n  activeSelectable:     \"pe-tabs__active--selectable\",\n  isAtEnd:              \"pe-tabs--end\",\n  isAtStart:            \"pe-tabs--start\",\n  isAutofit:            \"pe-tabs--autofit\",\n  isMenu:               \"pe-tabs--menu\",\n  scrollable:           \"pe-tabs--scrollable\",\n  compactTabs:          \"pe-tabs--compact\",\n  tabHasIcon:           \"pe-tabs__tab--icon\",\n  tabRowCentered:       \"pe-tabs__row--centered\",\n  tabRowIndent:         \"pe-tabs__row--indent\",\n\n  // lookup\n  label:                buttonClasses.label\n};","import { filterSupportedAttributes, isTouch, subscribe, unsubscribe, isRTL, deprecation } from \"polythene-core\";\nimport { scrollTo } from \"polythene-utilities\";\nimport classes from \"polythene-css-classes/tabs\";\n\nconst SCROLL_SPEED                 = 600; // px per second\nconst SCROLL_DELAY                 = .15; // seconds\nconst SCROLL_MIN_DURATION          = .5; // seconds\nconst INDICATOR_SLIDE_MIN_DURATION = .25; // seconds\n\nconst whenCreateDone = () => Promise.resolve();\n\nconst getButtons = vnode => {\n  const attrs = vnode.attrs;\n  return attrs.content\n    ? attrs.content\n    : attrs.tabs\n      ? attrs.tabs\n      : attrs.children || vnode.children || [];\n};\n\nconst getIndex = vnode => {\n  const buttons = getButtons(vnode);\n  const attrs = vnode.attrs;\n  const selectedIndex = Array.isArray(buttons)\n    ? buttons.reduce((acc, tab, index) => (\n      acc === undefined && !tab.disabled && tab.selected  \n        ? index\n        : acc\n    ), undefined)\n    : undefined;\n  if (selectedIndex !== undefined) {\n    return selectedIndex;\n  }\n  const attrsSelectedTabIndex = attrs.selectedTabIndex !== undefined\n    ? attrs.selectedTabIndex\n    : attrs.selectedTab !== undefined // deprecated\n      ? attrs.selectedTab\n      : undefined;\n  return attrsSelectedTabIndex !== undefined\n    ? attrsSelectedTabIndex\n    : 0;\n};\n\nconst scrollButtonGetNewIndex = (index, tabs) => {\n  const minTabIndex = 0;\n  const maxTabIndex = tabs.length - 1;\n  return {\n    backward: Math.max(index - 1, minTabIndex),\n    forward: Math.min(index + 1, maxTabIndex)\n  };\n};\n\nconst handleScrollButtonClick = (state, attrs, e, direction) => {\n  e.stopPropagation();\n  e.preventDefault();\n  const currentTabIndex = state.selectedTabIndex();\n  const newIndex = scrollButtonGetNewIndex(currentTabIndex, state.tabs)[direction];\n  if (newIndex !== currentTabIndex) {\n    setSelectedTab(state, attrs, newIndex, true);\n  } else {\n    scrollToTab(state, newIndex);\n  }\n};\n\nconst scrollToTab = (state, tabIndex) => {\n  const tabs = state.tabs;\n  const scroller = state.tabRowEl;\n  // Scroll to position of selected tab\n  const tabLeft = tabs.slice(0, tabIndex).reduce((totalWidth, tabData) =>\n    totalWidth + tabData.dom.getBoundingClientRect().width, 0);\n  // Tabs at the far right will not fully move to the left\n  // because the scrollable row will stick to the right \n  // to get the max scroll left, we subtract the visible viewport from the scroll width\n  const scrollerWidth = scroller.getBoundingClientRect().width; // frame width\n  const scrollingWidth = scroller.scrollWidth;\n  const maxScroll = scrollingWidth - scrollerWidth;\n  const left = state.isRTL\n    ? -1 * Math.min(tabLeft, maxScroll)\n    : Math.min(tabLeft, maxScroll);\n  const currentLeft = scroller.scrollLeft;\n  if (currentLeft !== left) {\n    const duration = Math.abs(currentLeft - left) / SCROLL_SPEED;\n    const delaySeconds = SCROLL_DELAY;\n    setTimeout(() => {\n      scrollTo({\n        element: scroller,\n        to: left,\n        duration: Math.max(SCROLL_MIN_DURATION, duration),\n        direction: \"horizontal\"\n      }).then(() => updateScrollButtons(state));\n    }, delaySeconds * 1000);\n  }\n};\n\nconst updateScrollButtons = state => {\n  const tabRowEl = state.tabRowEl;\n  const scrollLeft = tabRowEl.scrollLeft;\n  const currentTabIndex = state.selectedTabIndex();\n  const tabsEl = state.tabsEl;\n  const minTabIndex = 0;\n  const maxTabIndex = state.tabs.length - 1;\n  const isAtStart = (tabRowEl.scrollLeft === 0) && (currentTabIndex === minTabIndex);\n  const isAtEnd = (scrollLeft >= (tabRowEl.scrollWidth - tabsEl.getBoundingClientRect().width - 1)) && (currentTabIndex === maxTabIndex);\n  state.scrollButtonAtStart(isAtStart);\n  state.scrollButtonAtEnd(isAtEnd);\n};\n\nconst animateIndicator = (selectedTabEl, animate, state) => {\n  const parentRect = state.tabsEl.getBoundingClientRect();\n  const rect = selectedTabEl.getBoundingClientRect();\n  const buttonSize = state.managesScroll ? rect.height : 0;\n  const translateX = state.isRTL\n    ? rect.right - parentRect.right + state.tabRowEl.scrollLeft + buttonSize\n    : rect.left - parentRect.left + state.tabRowEl.scrollLeft - buttonSize;\n  const scaleX = 1 / (parentRect.width - 2 * buttonSize) * rect.width;\n  const transformCmd = `translate(${translateX}px, 0) scaleX(${scaleX})`;\n  const duration = animate\n    ? INDICATOR_SLIDE_MIN_DURATION\n    : 0;\n  const style = state.tabIndicatorEl.style;\n  style[\"transition-duration\"] = duration + \"s\";\n  style.transform = transformCmd;\n};\n\nconst setSelectedTab = (state, attrs, index, animate) => {\n  state.selectedTabIndex(index);\n  if (!state.tabs.length) return;\n  const selectedTabEl = state.tabs[index].dom;\n  if (selectedTabEl && state.tabIndicatorEl && state.tabsEl) {\n    animateIndicator(selectedTabEl, animate, state);\n  }\n  if (state.managesScroll) {\n    updateScrollButtons(state);\n  }\n  scrollToTab(state, index);\n  if (attrs.onChange) {\n    attrs.onChange({\n      index,\n      options: state.tabs[index].attrs,\n      el: selectedTabEl\n    });\n  }\n};\n\nconst sortByLargestWidth = (a, b) =>\n  a < b\n    ? 1\n    : a > b\n      ? -1\n      : 0;\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  if (attrs.selectedTab !== undefined) {\n    deprecation(\"Tabs\", { option: \"selectedTab\", newOption: \"selectedTabIndex\" });\n  }\n  const tabIndex = getIndex(vnode) || 0;\n  const selectedTabIndex = createStream(tabIndex);\n  const scrollButtonAtStart = createStream(true);\n  const scrollButtonAtEnd = createStream(true);\n  const registerTabButton = state =>\n    (index, data) => state.tabs[index] = data;\n  const registerScrollButton = state =>\n    (position, dom) => state.scrollButtons[position] = dom;\n  return {\n    tabsEl:                   undefined,\n    tabRowEl:                 undefined,\n    tabs:                     [], // {data, el}\n    tabRow:                   undefined,\n    tabIndicatorEl:           undefined,\n    selectedTabIndex,\n    previousSelectedTabIndex: undefined,\n    managesScroll:            attrs.scrollable && !isTouch,\n    scrollButtonAtStart,\n    scrollButtonAtEnd,\n    scrollButtons: {\n      start: undefined,\n      end: undefined\n    },\n    registerTabButton,\n    registerScrollButton,\n    isRTL:                    false,\n    cleanUp:                  undefined, // set in onMount\n    redrawOnUpdate:           createStream.merge([selectedTabIndex, scrollButtonAtStart, scrollButtonAtEnd])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.tabsEl = dom;\n  state.isRTL = isRTL({ element: dom });\n  if (!attrs.hideIndicator) {\n    state.tabIndicatorEl = dom.querySelector(`.${classes.indicator}`);\n  }\n  state.tabRowEl = dom.querySelector(`.${classes.tabRow}`);\n\n  const redrawLargestWidth = () => {\n    if (state.tabs && attrs.largestWidth) {\n      const widths = state.tabs.map(tabData => tabData.dom.getBoundingClientRect().width);\n      const largest = widths.sort(sortByLargestWidth)[0];\n      state.tabs.forEach(tabData => tabData.dom.style.width = largest + \"px\");\n    }\n  };\n\n  const redraw = () => (\n    redrawLargestWidth(),\n    setSelectedTab(state, attrs, state.selectedTabIndex(), false)\n  );\n\n  const handleFontEvent = ({ name }) =>\n    name === \"active\" || name === \"inactive\"\n      ? redraw()\n      : null;\n\n  subscribe(\"resize\", redraw);\n  subscribe(\"webfontloader\", handleFontEvent);\n\n  state.cleanUp = () => (\n    unsubscribe(\"resize\", redraw),\n    unsubscribe(\"webfontloader\", handleFontEvent)\n  );\n\n  // A promise can't resolve during the oncreate loop\n  // The Mithril draw loop is synchronous - there is no delay between one this oncreate and the tab button's oncreate\n  whenCreateDone().then(redraw);\n};\n\nexport const onUnMount = ({ state }) =>\n  state.cleanUp();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const autofit = attrs.scrollable || attrs.centered\n    ? false\n    : attrs.autofit\n      ? true\n      : false;\n\n  // Keep selected tab up to date\n  const index = getIndex(vnode);\n  if (index !== undefined && state.previousSelectedTabIndex !== index) {\n    setSelectedTab(state, attrs, index, true);\n  }\n  state.previousSelectedTabIndex = index;\n\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.scrollable ? classes.scrollable : null,\n        state.scrollButtonAtStart() ? classes.isAtStart : null,\n        state.scrollButtonAtEnd() ? classes.isAtEnd : null,\n        attrs.activeSelected ? classes.activeSelectable : null,\n        autofit ? classes.isAutofit : null,\n        attrs.compact ? classes.compactTabs : null,\n        attrs.menu ? classes.isMenu : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Tab, ScrollButton }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  const buttons = getButtons(vnode);\n\n  if (buttons.length === 0) {\n    console.error(\"No tabs specified\"); // eslint-disable-line no-console\n  }\n\n  const tabRow = buttons.map((buttonOpts = {}, index) => {\n    const buttonOptsCombined = Object.assign(\n      {},\n      buttonOpts,\n      {\n        // These options can be overridden by `all`\n        selected: index === state.selectedTabIndex(),\n        animateOnTap: (attrs.animateOnTap !== false) ? true : false\n      },\n      attrs.all,\n      {\n        // Internal options, should not get overridden\n        index,\n        key: buttonOpts.key || `tab-${index}`,\n        register: state.registerTabButton(state),\n        onSelect: () =>\n          setSelectedTab(state, attrs, index, attrs.noIndicatorSlide ? false : true)\n      }\n    );\n    return h(Tab, buttonOptsCombined);\n  });\n\n  let scrollButtonAtStart, scrollButtonAtEnd;\n  if (attrs.scrollable) {\n    scrollButtonAtStart = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"backward\",\n        icon: attrs.scrollIconBackward,\n        className: classes.scrollButtonAtStart,\n        position: \"start\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"backward\") },\n        isRTL: state.isRTL\n      }\n    ));\n    scrollButtonAtEnd = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"forward\",\n        icon: attrs.scrollIconForward,\n        className: classes.scrollButtonAtEnd,\n        position: \"end\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"forward\") },\n        isRTL: state.isRTL\n      }\n    ));\n  }\n\n  const tabIndicator = attrs.hideIndicator\n    ? null\n    : h(\"div\",\n      {\n        key: \"indicator\",\n        className: classes.indicator\n      }\n    );\n\n  return [\n    attrs.scrollable ? scrollButtonAtStart : null,\n    h(\"div\",\n      {\n        key: \"tabrow\",\n        className: [\n          classes.tabRow,\n          attrs.centered ? classes.tabRowCentered : null,\n          attrs.scrollable ? classes.tabRowIndent : null\n        ].join(\" \")\n      },\n      [\n        tabRow,\n        tabIndicator\n      ]\n    ),\n    attrs.scrollable ? scrollButtonAtEnd : null\n  ];\n};","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped Button component (set in polythene-xxx-tabs/tab)\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const attrs = vnode.attrs;\n  attrs.register(attrs.index, {\n    attrs,\n    dom\n  });\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k, Icon }) => {\n  const attrs = vnode.attrs;\n  // Let internal onclick function co-exist with passed button option\n  const events = attrs.events || {};\n  events[k.onclick] = events[k.onclick] || (() => {});\n  return Object.assign(\n    {},\n    attrs,\n    {\n      content: h(\"div\",\n        { className: classes.tabContent },\n        [\n          attrs.icon ? h(Icon, attrs.icon) : null,\n          attrs.label\n            ? h(\"div\",\n              { className: classes.label },\n              h(\"span\", attrs.label)\n            )\n            : null,\n        ]),\n      className: [\n        classes.tab,\n        attrs.icon && attrs.label ? classes.tabHasIcon : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      selected: attrs.selected,\n      wash: false,\n      ripple: true,\n      events: Object.assign(\n        {},\n        events,\n        {\n          [k.onclick]: e => {\n            attrs.onSelect();\n            events[k.onclick](e);\n          }\n        }\n      )\n    }\n  );\n};\n\nexport const createContent = vnode =>\n  vnode.children;\n","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped IconButton component (set in polythene-xxx-tabs/scroll-button)\n\nconst arrowBackward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/></svg>\";\nconst arrowForward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/></svg>\";\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const attrs = vnode.attrs;\n  attrs.register(attrs.position, dom);\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const icon = attrs.position === \"start\"\n    ? attrs.icon || { svg: { content: h.trust(attrs.isRTL ? arrowForward : arrowBackward) } }\n    : attrs.icon || { svg: { content: h.trust(attrs.isRTL ? arrowBackward : arrowForward) } };\n  return {\n    className: [\n      classes.scrollButton,\n      attrs.className || attrs[k.class]\n    ].join(\" \"),\n    icon,\n    ripple: { center: true },\n    events: attrs.events,\n  };\n};\n"],"names":["component","super","row","content","label","textLabel","wash","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","indicator","scrollButton","scrollButtonAtEnd","scrollButtonAtStart","tab","tabContent","tabRow","activeSelectable","isAtEnd","isAtStart","isAutofit","isMenu","scrollable","compactTabs","tabHasIcon","tabRowCentered","tabRowIndent","buttonClasses","SCROLL_SPEED","SCROLL_DELAY","SCROLL_MIN_DURATION","INDICATOR_SLIDE_MIN_DURATION","whenCreateDone","Promise","resolve","getButtons","vnode","attrs","tabs","children","getIndex","buttons","selectedIndex","Array","isArray","reduce","acc","index","undefined","attrsSelectedTabIndex","selectedTabIndex","selectedTab","scrollButtonGetNewIndex","minTabIndex","maxTabIndex","length","backward","Math","max","forward","min","handleScrollButtonClick","state","e","direction","stopPropagation","preventDefault","currentTabIndex","newIndex","setSelectedTab","scrollToTab","tabIndex","scroller","tabRowEl","tabLeft","slice","totalWidth","tabData","dom","getBoundingClientRect","width","scrollerWidth","scrollingWidth","scrollWidth","maxScroll","left","isRTL","currentLeft","scrollLeft","duration","abs","delaySeconds","setTimeout","scrollTo","element","to","then","updateScrollButtons","tabsEl","animateIndicator","selectedTabEl","animate","parentRect","rect","buttonSize","managesScroll","height","translateX","right","scaleX","transformCmd","style","tabIndicatorEl","transform","onChange","options","el","sortByLargestWidth","a","b","getInitialState","createStream","deprecation","option","newOption","registerTabButton","data","registerScrollButton","position","scrollButtons","previousSelectedTabIndex","isTouch","start","end","cleanUp","redrawOnUpdate","merge","onMount","hideIndicator","querySelector","classes","redrawLargestWidth","largestWidth","widths","map","largest","sort","forEach","redraw","handleFontEvent","name","subscribe","unsubscribe","onUnMount","createProps","k","keys","autofit","centered","filterSupportedAttributes","className","activeSelected","compact","menu","tone","class","join","createContent","h","renderer","Tab","ScrollButton","console","error","buttonOpts","buttonOptsCombined","animateOnTap","all","key","register","onSelect","noIndicatorSlide","icon","scrollIconBackward","events","onclick","scrollIconForward","tabIndicator","Icon","ripple","arrowBackward","arrowForward","svg","trust","center"],"mappings":"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"}