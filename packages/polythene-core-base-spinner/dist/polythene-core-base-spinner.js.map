{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/spinner.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent, classForSize, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst transitionOptions = (state, attrs, isShow) => ({\n  state,\n  attrs,\n  isShow,\n  domElements: {\n    el: state.dom(),\n  },\n  showClass: classes.visible\n});\n\nconst showSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, true));\n\nconst hideSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, false));\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  const dom = createStream(null);\n  return {\n    dom,\n    visible,\n    transitioning,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (attrs.z !== undefined) {\n    deprecation(\"Spinner\", { option: \"z\", newOption: \"shadowDepth\" });\n  }\n\n  state.dom(vnode.dom);\n\n  if (!attrs.permanent) {\n    showSpinner(state, attrs);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.instanceClass,\n        classForSize(classes, attrs.size),\n        attrs.singleColor ? classes.singleColor: null,\n        attrs.raised ? classes.raised : null,\n        attrs.animated ? classes.animated : null,\n        attrs.permanent ? classes.permanent : null,\n        attrs.permanent ? classes.visible : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, Shadow }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (state.hide) {\n    setTimeout(() => { hideSpinner(state, attrs); }, 0);\n  }\n  const shadowDepth = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z; // deprecated\n\n  return [\n    attrs.raised && attrs.content\n      ? h(Shadow, { key: \"shadow\", shadowDepth })\n      : null,\n    attrs.content\n  ];\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","transitionOptions","state","attrs","isShow","domElements","el","dom","showClass","classes","showSpinner","transitionComponent","hideSpinner","getInitialState","vnode","createStream","transitioning","redrawOnUpdate","merge","onMount","z","undefined","deprecation","option","newOption","createProps","k","keys","filterSupportedAttributes","className","instanceClass","classForSize","size","class","join","events","createContent","h","renderer","Shadow","hide","setTimeout","shadowDepth","content","key"],"mappings":"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"}