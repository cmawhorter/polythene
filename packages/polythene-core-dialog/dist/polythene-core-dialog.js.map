{"version":3,"file":"polythene-core-dialog.js","sources":["../../polythene-css-classes/list-tile.js","../../polythene-css-classes/menu.js","../../polythene-css-classes/dialog.js","../src/dialog.js"],"sourcesContent":["\nexport default {\n  component:       \"pe-list-tile\",\n\n  // elements\n  content:           \"pe-list-tile__content\",\n  highSubtitle:      \"pe-list-tile__high-subtitle\",\n  primary:           \"pe-list-tile__primary\",\n  secondary:         \"pe-list-tile__secondary\",\n  subtitle:          \"pe-list-tile__subtitle\",\n  title:             \"pe-list-tile__title\",\n  contentFront:      \"pe-list-tile__content-front\",\n  \n  // states  \n  compact:           \"pe-list-tile--compact\",\n  compactFront:      \"pe-list-tile--compact-front\",\n  disabled:          \"pe-list-tile--disabled\",\n  hasFront:          \"pe-list-tile--front\",\n  hasHighSubtitle:   \"pe-list-tile--high-subtitle\",\n  hasSubtitle:       \"pe-list-tile--subtitle\",\n  header:            \"pe-list-tile--header\",\n  hoverable:         \"pe-list-tile--hoverable\",\n  insetH:            \"pe-list-tile--inset-h\",\n  insetV:            \"pe-list-tile--inset-v\",\n  selectable:        \"pe-list-tile--selectable\",\n  selected:          \"pe-list-tile--selected\",\n  rounded:           \"pe-list-tile--rounded\",\n  highlight:         \"pe-list-tile--highlight\",\n  sticky:            \"pe-list-tile--sticky\",\n  navigation:        \"pe-list-tile--navigation\",\n};\n","import listTileClasses from \"./list-tile\";\n\nexport default {\n  component:   \"pe-menu\",\n\n  // elements\n  panel:       \"pe-menu__panel\",\n  content:     \"pe-menu__content\",\n  placeholder: \"pe-menu__placeholder\",\n  backdrop:    \"pe-menu__backdrop\",\n\n  // states\n  floating:     \"pe-menu--floating\",\n  origin:       \"pe-menu--origin\",\n  permanent:    \"pe-menu--permanent\",\n  showBackdrop: \"pe-menu--backdrop\",\n  visible:      \"pe-menu--visible\",\n  width_auto:   \"pe-menu--width-auto\",\n  width_n:      \"pe-menu--width-\",\n  isTopMenu:    \"pe-menu--top-menu\",\n\n  // lookup\n  listTile:         listTileClasses.component,\n  selectedListTile: listTileClasses.selected,\n};","import menuClasses from \"./menu\";\n\nexport default {\n  component:         \"pe-dialog\",\n\n  // elements\n  placeholder:       \"pe-dialog__placeholder\",\n  holder:            \"pe-dialog__holder\",\n  content:           \"pe-dialog__content\",\n  backdrop:          \"pe-dialog__backdrop\",\n  touch:             \"pe-dialog__touch\",\n\n  // states\n  fullScreen:        \"pe-dialog--full-screen\",\n  modal:             \"pe-dialog--modal\",\n  open:              \"pe-dialog--open\",    // class set to html element\n  visible:           \"pe-dialog--visible\", // class set to dialog element\n  showBackdrop:      \"pe-dialog--backdrop\",\n  transition:        \"pe-dialog--transition\",\n\n  // lookup\n  menuContent:       menuClasses.content,\n};\n","import { filterSupportedAttributes, subscribe, unsubscribe, transitionComponent, stylePropCompare, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/dialog\";\n\nconst DEFAULT_SHADOW_DEPTH    = 3;\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nconst isFullScreen = ({ state, attrs }) =>\n  attrs.fullScreen || stylePropCompare({\n    element: state.el,\n    pseudoSelector: \":before\",\n    prop: \"content\",\n    contains: `\"${\"full_screen\"}\"`\n  });\n\nconst isModal = ({ state, attrs }) =>\n  attrs.modal || stylePropCompare({\n    element: state.el,\n    pseudoSelector: \":before\",\n    prop: \"content\",\n    contains: `\"${\"modal\"}\"`\n  });\n\nconst transitionOptions = (state, attrs, isShow) => ({\n  state,\n  attrs,\n  isShow,\n  domElements: {\n    el: state.el,\n    contentEl: state.contentEl,\n    backdropEl: state.backdropEl,\n  },\n  showClass: classes.visible,\n  transitionClass: classes.transition,\n});\n\nconst showDialog = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, true));\n\nconst hideDialog = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, false));\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  return {\n    backdropEl: undefined,\n    touchEl:    undefined,\n    cleanUp:    undefined,\n    el:         undefined,\n    contentEl:  undefined,\n    transitioning,\n    visible,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (attrs.z !== undefined) {\n    deprecation(\"Dialog\", { option: \"z\", newOption: \"shadowDepth\" });\n  }\n\n  const dom = vnode.dom;\n  state.el = dom;\n  state.backdropEl = dom.querySelector(`.${classes.backdrop}`);\n  state.touchEl = dom.querySelector(`.${classes.touch}`);\n  state.contentEl = dom.querySelector(`.${classes.content}`);\n\n  if (!attrs.inactive) { // used by Drawer\n\n    const handleEscape = e => {\n      if (isFullScreen(vnode) || isModal(vnode)) return;\n      if (e.key === \"Escape\" || e.key === \"Esc\") { // \"Esc\" for IE11\n        const openDialogs = document.querySelectorAll(`.${classes.component}`);\n        if (openDialogs[openDialogs.length - 1] === state.el) {\n          hideDialog(state, Object.assign({}, attrs, {\n            hideDelay: 0\n          }));\n        }\n      }\n    };\n\n    state.cleanUp = () => (\n      unsubscribe(\"keydown\", handleEscape)\n    );\n\n    subscribe(\"keydown\", handleEscape);\n\n    if (attrs.show) {\n      showDialog(state, attrs);\n    }\n  }\n};\n\nexport const onUnMount = vnode => (\n  vnode.state.cleanUp && vnode.state.cleanUp()\n);\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs, { remove: [\"style\"] }), // style set in content, and set by show/hide transition\n    {\n      className: [\n        attrs.parentClassName || classes.component,\n        attrs.fromMultipleClassName,\n        attrs.fullScreen ? classes.fullScreen : null,\n        attrs.modal ? classes.modal : null,\n        attrs.backdrop ? classes.showBackdrop : null,\n        // classes.visible is set in showDialog though transition\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      \"data-spawn-id\": attrs.spawnId,       // received from Multi\n      \"data-instance-id\": attrs.instanceId, // received from Multi\n      // click backdrop: close dialog\n      [k.onclick]: e => {\n        if (e.target !== state.el && e.target !== state.backdropEl && e.target !== state.touchEl) {\n          return;\n        }\n        if (isModal(vnode)) {\n          // not allowed\n          return;\n        }\n        hideDialog(state, attrs);\n      }\n    }\n  );\n};\n\nexport const createPane = (vnode, { renderer: h, Pane }) => {\n  const attrs = vnode.attrs;\n  return h(Pane, {\n    body: attrs.content || attrs.body || attrs.menu || vnode.children,\n    borders: attrs.borders,\n    className: attrs.className,\n    footer: attrs.footer,\n    footerButtons: attrs.footerButtons,\n    formOptions: attrs.formOptions,\n    fullBleed: attrs.fullBleed,\n    header: attrs.header,\n    style: attrs.style,\n    title: attrs.title,\n  });\n};\n\nexport const createContent = (vnode, { renderer, Shadow, createPane, Pane }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const h = renderer;\n\n  if (state.el) {\n    const visible = state.visible();\n    const transitioning = state.transitioning();\n    if (!transitioning) {\n      if (attrs.hide && visible) {\n        // Use setTimeout to play nice with React's lifecycle functions\n        setTimeout(() => hideDialog(state, attrs), 0);\n      } else if (attrs.show && !visible) {\n        setTimeout(() => showDialog(state, attrs), 0);\n      }\n    }\n  }\n  const pane = attrs.panesOptions && attrs.panesOptions.length\n    ? h(Pane, attrs.panesOptions[0])\n    : attrs.panes && attrs.panes.length\n      ? attrs.panes[0]\n      : createPane(vnode, { renderer, Pane } );\n  const shadowDepth = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z; // deprecated\n  return [\n    h(\"div\",\n      {\n        key: \"backdrop\",\n        className: classes.backdrop\n      }\n    ),\n    h(\"div\",\n      {\n        key: \"touch\",\n        className: classes.touch\n      }\n    ),\n    h(\"div\",\n      {\n        className: [\n          classes.content,\n          attrs.menu ? classes.menuContent : null\n        ].join(\" \"),\n        key: \"content\"\n      },\n      [\n        attrs.fullScreen\n          ? null\n          : h(Shadow, {\n            shadowDepth: shadowDepth !== undefined\n              ? shadowDepth\n              : DEFAULT_SHADOW_DEPTH,\n            animated: true,\n            key: \"shadow\"\n          }),\n        pane\n      ]\n    )\n  ];\n};\n"],"names":["component","content","highSubtitle","primary","secondary","subtitle","title","contentFront","compact","compactFront","disabled","hasFront","hasHighSubtitle","hasSubtitle","header","hoverable","insetH","insetV","selectable","selected","rounded","highlight","sticky","navigation","panel","placeholder","backdrop","floating","origin","permanent","showBackdrop","visible","width_auto","width_n","isTopMenu","listTile","listTileClasses","selectedListTile","holder","touch","fullScreen","modal","open","transition","menuContent","menuClasses","DEFAULT_SHADOW_DEPTH","getElement","vnode","attrs","element","isFullScreen","state","stylePropCompare","el","pseudoSelector","prop","contains","isModal","transitionOptions","isShow","domElements","contentEl","backdropEl","showClass","classes","transitionClass","showDialog","transitionComponent","hideDialog","getInitialState","createStream","transitioning","undefined","touchEl","cleanUp","redrawOnUpdate","merge","onMount","dom","z","deprecation","option","newOption","querySelector","inactive","handleEscape","e","key","openDialogs","document","querySelectorAll","length","hideDelay","unsubscribe","subscribe","show","onUnMount","createProps","k","keys","filterSupportedAttributes","remove","className","parentClassName","fromMultipleClassName","tone","class","join","spawnId","instanceId","onclick","target","createPane","h","renderer","Pane","body","menu","children","borders","footer","footerButtons","formOptions","fullBleed","style","createContent","Shadow","hide","setTimeout","pane","panesOptions","panes","shadowDepth","animated"],"mappings":"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"}