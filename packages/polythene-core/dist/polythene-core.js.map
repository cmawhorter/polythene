{"version":3,"file":"polythene-core.js","sources":["../src/Conditional.js","../src/developer.js","../src/attrs.js","../src/iso.js","../src/animation-event.js","../src/style.js","../src/icons.js","../src/pointer.js","../src/events.js","../src/Multi.js","../src/transition.js"],"sourcesContent":["// @ts-check\n\nconst modes = {\n  hidden:   \"hidden\",\n  visible:  \"visible\",\n  exposing: \"exposing\",\n  hiding:   \"hiding\",\n};\n\nexport const Conditional = {\n  /**\n   * @param {object} vnode\n   * @param {object} createStream\n   */\n  getInitialState: (vnode, createStream) => {\n    const attrs = vnode.attrs;\n    if (!attrs.didHide) {\n      return {};\n    }\n    const visible = attrs.permanent || attrs.show;\n    const mode = createStream(attrs.permanent\n      ? modes.visible\n      : visible\n        ? modes.visible\n        : modes.hidden);\n    return {\n      mode,\n      redrawOnUpdate: createStream.merge([mode])\n    };\n  },\n  /**\n   * @param {object} params\n   * @param {object} params.state\n   * @param {object} params.attrs\n   */\n  onUpdate: ({ state, attrs }) => {\n    if (!attrs.didHide) {\n      return;\n    }\n    const mode = state.mode();\n    if (attrs.permanent) {\n      if (mode === modes.visible && attrs.show) {\n        state.mode(modes.exposing);\n      } else if (mode === modes.exposing && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    } else {\n      // \"normal\" type\n      if (mode === modes.hidden && attrs.show) {\n        state.mode(modes.visible);\n      } else if (mode === modes.visible && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    }\n  },\n  /**\n   * @param {object} params\n   * @param {object} params.state\n   * @param {object} params.attrs\n   * @param {object} attrs\n   * @param {function} attrs.renderer\n   */\n  view: ({ state, attrs }, { renderer: h }) => {\n    const placeholder = h(\"span\", { className: attrs.placeholderClassName });\n        \n    // No didHide callback passed: use normal visibility evaluation\n    if (!attrs.didHide) {\n      return attrs.permanent || attrs.inactive || attrs.show\n        ? h(attrs.instance, attrs)\n        : placeholder;\n    }\n\n    // else: use didHide to reset the state after hiding\n    const mode = state.mode();\n    const visible = mode !== modes.hidden;\n    return visible\n      ? h(attrs.instance, {\n        ...attrs,\n        didHide:\n          /**\n           * @param {any} args\n           */\n          (args) => (\n            attrs.didHide(args),\n            state.mode(attrs.permanent\n              ? modes.visible\n              : modes.hidden\n            )\n          ),\n        ...(mode === modes.hiding\n          ? { show: true, hide: true }\n          : undefined\n        )\n      })\n      : placeholder; \n  },\n  displayName: \"Conditional\"\n};\n\n","// @ts-check\n\n/**\n * \n * @param {string} component \n * @param {object} params\n * @param {string} [params.option]\n * @param {string} [params.newOption]\n * @param {string} [params.newOption]\n * @param {string} [params.newComponent]\n * @param {string} [params.since]\n */\nexport const deprecation = (component, { option, newOption, newComponent, since }) => {\n  const version = since\n    ? `Since version ${since}.`\n    : \"\";\n  return (\n    option && console.warn(`${component}: option '${option}' is deprecated and will be removed in later versions. Use '${newOption}' instead. ${version}`), // eslint-disable-line no-console\n    newComponent && !newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use component '${newComponent}' instead. ${version}`), // eslint-disable-line no-console\n    newComponent && newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use component '${newComponent}' with option '${newOption}' instead. ${version}`) // eslint-disable-line no-console\n  );\n};\n","// @ts-check\n\n/**\n * Reducer helper function.\n * @param {object} acc \n * @param {string} p \n * @returns {object}\n */\nconst r = (acc, p) => (acc[p] = 1, acc);\n\n/**\n * List of default attributes.\n * Separately handled:\n * - class\n * - element\n * @type Array<string> defaultAttrs\n */\nconst defaultAttrs = [\n  // Universal\n  \"key\",\n  \"style\",\n  \"href\",\n  \"id\",\n  \n  // React\n  \"tabIndex\",\n\n  // Mithril\n  \"tabindex\",\n  \"oninit\",\n  \"oncreate\",\n  \"onupdate\",\n  \"onbeforeremove\",\n  \"onremove\",\n  \"onbeforeupdate\",\n];\n\n/**\n * \n * @param {{[s: string]: string}} attrs \n * @param {object} [modifications] \n * @param {Array<string>} [modifications.add]\n * @param {Array<string>} [modifications.remove]\n * @returns {object}\n */\nexport const filterSupportedAttributes = (attrs, { add, remove} = {}) => {\n  /**\n   * @type {{[s: string]: string}} removeLookup \n   */\n  const removeLookup = remove\n    ? remove.reduce(r, {})\n    : {};\n  /**\n   * @type {Array<string>} attrsList \n   */\n  const attrsList = add\n    ? defaultAttrs.concat(add)\n    : defaultAttrs;\n  const supported = attrsList.filter(item => !removeLookup[item]).reduce(r, {});\n  return Object.keys(attrs).reduce(\n    /**\n     * @param {object} acc\n     * @param {string} key\n     */\n    (acc, key) => (\n      supported[key]\n        ? acc[key] = attrs[key]\n        : null,\n      acc\n    ), {});\n};\n\n/**\n * \n * @param {object|function} attrs \n * @returns {object}\n */\nexport const unpackAttrs = attrs =>\n  typeof attrs === \"function\"\n    ? attrs()\n    : attrs;\n\n/**\n * \n * @param {{[s: string]: string}} classes \n * @returns {{[s: string]: string}}\n */\nconst sizeClasses = classes => ({\n  small:   classes.small,\n  regular: classes.regular,\n  medium:  classes.medium,\n  large:   classes.large,\n  fab:     classes.fab,\n});\n\n/**\n * \n * @param {{[s: string]: string}} classes \n * @param {string} [size] \n * @returns {object}\n */\nexport const classForSize = (classes, size = \"regular\") =>\n  sizeClasses(classes)[size];\n\n","export const isClient = typeof document !== \"undefined\";\nexport const isServer = !isClient;\n","// @ts-check\n\nimport { isClient } from \"./iso\";\n\n/**\n * @type {{[s: string]: string}} evts\n */\nconst evts = {\n  \"animation\": \"animationend\",\n  \"OAnimation\": \"oAnimationEnd\",\n  \"MozAnimation\": \"animationend\",\n  \"WebkitAnimation\": \"webkitAnimationEnd\"\n};\n\nexport const getAnimationEndEvent = () => {\n  if (isClient) {\n    const el = document.createElement(\"fakeelement\");\n    /**\n     * @type {string} a\n     */\n    for (let a in evts) {\n      /**\n       * @type {object} style\n       */\n      const style = el.style;\n      if (style[a] !== undefined) {\n        return evts[a];\n      }\n    }\n  }\n};\n","// @ts-check\n\n/**\n * @param {object} params\n * @param {object} params.element\n * @param {string} [params.selector]\n * @param {string} [params.pseudoSelector]\n * @param {string} params.prop\n * @returns {object|undefined}\n */\nexport const getStyle = ({ element, selector, pseudoSelector, prop }) => {\n  const el = selector\n    ? element.querySelector(selector)\n    : element;\n  if (!el) {\n    return undefined;\n  }\n  if (el.currentStyle) {\n    return el.currentStyle;\n  }\n  if (window.getComputedStyle) {\n    const defaultView = document.defaultView;\n    if (defaultView) {\n      const style = defaultView.getComputedStyle(el, pseudoSelector);\n      if (style) {\n        return style.getPropertyValue(prop);\n      }\n    }\n  }\n  return undefined;\n};\n\n/**\n * \n * @param {object} params\n * @param {object} params.element\n * @param {string} [params.selector]\n * @param {string} [params.pseudoSelector]\n * @param {string} params.prop\n * @param {string} [params.equals]\n * @param {string} [params.contains]\n * @returns {boolean}\n */\nexport const stylePropCompare = ({ element, selector, pseudoSelector, prop, equals, contains }) => {\n  const el = selector\n    ? element.querySelector(selector)\n    : element;\n  if (!el) {\n    return false;\n  }\n  const defaultView = document.defaultView;\n  if (defaultView) {\n    if (equals !== undefined) {\n      return equals === defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop);\n    }\n    if (contains !== undefined) {\n      return defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop).indexOf(contains) !== -1;\n    }\n  }\n  return false;\n};\n\n/**\n * \n * @param {object} params\n * @param {object} params.element\n * @param {string} params.selector\n * @returns {boolean}\n */\nexport const isRTL = ({ element = document, selector }) => \n  stylePropCompare({ element, selector, prop: \"direction\", equals: \"rtl\" });\n\n/**\n * \n * @param {string} durationStr \n * @returns {number}\n */\nexport const styleDurationToMs = durationStr => {\n  const parsed = parseFloat(durationStr) * (durationStr.indexOf(\"ms\") === -1 ? 1000 : 1);\n  return isNaN(parsed)\n    ? 0\n    : parsed;\n};","\nexport const iconDropdownUp = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-up-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 14l5-5 5 5z\\\"/></svg>\";\nexport const iconDropdownDown = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-down-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 10l5 5 5-5z\\\"/></svg>\";\n","// @ts-check\n\nimport { isClient, isServer } from \"./iso\";\n\nexport const isTouch = isServer\n  ? false\n  : \"ontouchstart\" in document.documentElement;\n\nexport const pointerStartEvent = isTouch\n  ? [\"touchstart\", \"click\"]\n  : [\"click\"];\n\nexport const pointerEndEvent = isTouch\n  ? [\"click\", \"mouseup\"]\n  : [\"mouseup\"];\n\nexport const pointerStartMoveEvent = isTouch\n  ? [\"touchstart\", \"mousedown\"]\n  : [\"mousedown\"];\n\nexport const pointerMoveEvent = isTouch\n  ? [\"touchmove\", \"mousemove\"]\n  : [\"mousemove\"];\n\nexport const pointerEndMoveEvent = isTouch\n  ? [\"touchend\", \"mouseup\"]\n  : [\"mouseup\"];\n\nif (isClient) {\n  const htmlElement = document.querySelector(\"html\");\n  if (htmlElement) {\n    htmlElement.classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n  }\n}\n","// @ts-check\n\nimport { pointerEndEvent } from \"./pointer\";\nimport { isClient } from \"./iso\";\n\n/**\n * @type {{[s: string]: Array<function>}} listeners\n */\nconst listeners = {};\n\n/**\n * @param {function} func\n * @param {number} [s]\n * @param {object} [context]\n * @returns {function}\n * @see https://gist.github.com/Eartz/fe651f2fadcc11444549\n */\nexport const throttle = (func, s = 0.05, context = isClient ? window : {}) => {\n  let wait = false;\n  return (...args) => {\n    const later = () => func.apply(context, args);\n    if (!wait) {\n      later();\n      wait = true;\n      setTimeout(() => wait = false, s);\n    }\n  };\n};\n\n/**\n * \n * @param {string} eventName \n * @param {object} listener \n * @param {number} [delay] \n */\nexport const subscribe = (eventName, listener, delay) => {\n  listeners[eventName] = listeners[eventName] || [];\n  listeners[eventName].push(delay ? throttle(listener, delay) : listener);\n};\n\n/**\n * \n * @param {string} eventName \n * @param {object} listener \n */\nexport const unsubscribe = (eventName, listener) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  const index = listeners[eventName].indexOf(listener);\n  if (index > -1) {\n    listeners[eventName].splice(index, 1);\n  }\n};\n\n/**\n * \n * @param {string} eventName \n * @param {object} event \n */\nexport const emit = (eventName, event) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  listeners[eventName].forEach(listener => listener(event));\n};\n\nif (isClient) {\n  window.addEventListener(\"resize\",      e => emit(\"resize\", e));\n  window.addEventListener(\"scroll\",      e => emit(\"scroll\", e));\n  window.addEventListener(\"keydown\",     e => emit(\"keydown\", e));\n  pointerEndEvent.forEach(eventName =>\n    window.addEventListener(eventName, e => emit(eventName, e))\n  );\n}\n","/*\nHelper module to manage multiple items of the same component type.\n*/\n\nimport { isClient } from \"./iso\";\nimport { unpackAttrs } from \"./attrs\";\nimport { emit } from \"./events\";\n\n/**\n * @typedef {object} Item \n */\n\n/**\n * \n * @param {object} params\n * @param {object} params.options\n * @param {function} params.renderer\n */\nexport const Multi = ({ options: mOptions, renderer }) => {\n\n  /**\n   * @type {Array<Item>} items\n   */\n  const items = []; // This is shared between all instances of a type (Dialog, Notification, ...)\n  let current;\n  \n  const getInitialState = (vnode, createStream) => {\n    current = createStream(null);\n    return {\n      current,\n      redrawOnUpdate: createStream.merge([current])\n    };\n  };\n\n  /*\n  @param e: { id, eventName }\n  */\n  const onChange = e => {\n    if (!current) {\n      console.error(\"Cannot set state. Did you set a root element like Dialog to show instances?\"); // eslint-disable-line no-console\n    }\n    current(e.id);\n    emit(mOptions.name, e);\n  };\n\n  const itemIndex = id => {\n    const item = findItem(id);\n    return items.indexOf(item);\n  };\n\n  const removeItem = id => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items.splice(index, 1);\n      onChange({ id, name: \"removeItem\" });\n    }\n  };\n\n  const replaceItem = (id, newItem) => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items[index] = newItem;\n    }\n  };\n\n  const findItem = id => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].instanceId === id) {\n        return items[i];\n      }\n    }\n  };\n\n  const next = () => {\n    if (items.length) {\n      items[0].show = true;\n    }\n    onChange({ id: items.length ? items[0].instanceId : null, name: \"next\" });\n  };\n\n  const remove = (instanceId = mOptions.defaultId) => {\n    if (mOptions.queue) {\n      items.shift();\n      next();\n    } else {\n      removeItem(instanceId);\n    }\n  };\n\n  const removeAll = () => {\n    items.length = 0;\n    onChange({ id: null, name: \"removeAll\" });\n  };\n\n  const setPauseState = (pause, instanceId) => {\n    const item = findItem(instanceId);\n    if (item) {\n      item.pause = pause;\n      item.unpause = !pause;\n      onChange({ id: instanceId, name: pause ? \"pause\" : \"unpause\" });\n    }\n  };\n\n  const createItem = (itemAttrs, instanceId, spawn) => {\n    let resolveShow;\n    let resolveHide;\n    const attrs = unpackAttrs(itemAttrs);\n\n    const didShow = () => {\n      if (attrs.didShow) {\n        attrs.didShow(instanceId);\n      }\n      onChange({ id: instanceId, name: \"didShow\" });\n      return resolveShow(instanceId);\n    };\n    const showPromise = new Promise(resolve => \n      resolveShow = resolve\n    );\n\n    const didHide = () => {\n      if (attrs.didHide) {\n        attrs.didHide(instanceId);\n      }\n      onChange({ id: instanceId, name: \"didHide\" });\n      remove(instanceId);\n      return resolveHide(instanceId);\n    };\n\n    const hidePromise = new Promise(resolve => resolveHide = resolve);\n\n    return {\n      ...mOptions,\n      instanceId,\n      spawn,\n      attrs: itemAttrs,\n      show: mOptions.queue ? false : true,\n      showPromise,\n      hidePromise,\n      didShow,\n      didHide\n    };\n  };\n\n  const count = () => items.length;\n  const pause = (instanceId = mOptions.defaultId) => setPauseState(true, instanceId);\n  const unpause = (instanceId = mOptions.defaultId) => setPauseState(false, instanceId);\n\n  const show = (attrs = {}, spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const spawn = spawnOpts.spawn || mOptions.defaultId;\n    const item = createItem(attrs, instanceId, spawn);\n    onChange({ id: instanceId, name: \"show\" });\n    if (mOptions.queue) {\n      items.push(item);\n      if (items.length === 1) {\n        next();\n      }\n    } else {\n      const storedItem = findItem(instanceId);\n      if (!storedItem) {\n        items.push(item);\n      } else {\n        replaceItem(instanceId, item);\n      }\n    }\n    return item.showPromise;\n  };\n\n  const hide = (spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const item = mOptions.queue && items.length\n      ? items[0]\n      : findItem(instanceId);\n    if (item) {\n      item.hide = true;\n    }\n    onChange({ id: instanceId, name: \"hide\" });\n    return item\n      ? item.hidePromise\n      : Promise.resolve(instanceId);\n  };\n\n  const clear = removeAll;\n\n  const view = ({ attrs }) => {\n    const spawn = attrs.spawn || mOptions.defaultId;\n    const candidates = items.filter(item => \n      item.show && item.spawn === spawn\n    );\n    if (mOptions.htmlShowClass && isClient && document.documentElement) {\n      document.documentElement.classList[candidates.length ? \"add\" : \"remove\"](mOptions.htmlShowClass);\n    }\n    \n    return !candidates.length\n      ? renderer(mOptions.placeholder) // placeholder because we cannot return null\n      : renderer(mOptions.holderSelector,\n        {\n          className: attrs.position === \"container\"\n            ? \"pe-multiple--container\"\n            : \"pe-multiple--screen\"\n        },\n        candidates.map(itemData => {\n          return renderer(mOptions.instance, {\n            ...unpackAttrs(attrs),\n            fromMultipleClear: clear,\n            spawnId: spawn,\n            // from mOptions:\n            fromMultipleClassName: mOptions.className,\n            holderSelector: mOptions.holderSelector,\n            transitions: mOptions.transitions,\n            // from itemData:\n            fromMultipleDidHide: itemData.didHide,\n            fromMultipleDidShow: itemData.didShow,\n            hide: itemData.hide,\n            instanceId: itemData.instanceId,\n            key: itemData.key,\n            pause: itemData.pause,\n            show: itemData.show,\n            unpause: itemData.unpause,\n            ...unpackAttrs(itemData.attrs)\n          });\n        })\n      );\n  };\n\n  return {\n    clear,\n    count,\n    getInitialState,  \n    hide,\n    pause,\n    remove,\n    show,\n    unpause,\n    view,\n  };\n};\n\nMulti[\"displayName\"] = \"Multi\";\n","//@ts-check\n\n/*\nGeneric show/hide transition module\n*/\n\nimport { isClient } from \"./iso\";\nimport { styleDurationToMs } from \"./style\";\n\n/**\n * \n * @typedef {{ el?: HTMLElement, duration?: number, hasDuration?: boolean, delay?: number, hasDelay?: boolean, timingFunction?: string, transitionClass?: string, transitionClassElement?: HTMLElement, before?: () => void, after?: () => void, transition?: () => void, showClass?: string, showClassElement?: HTMLElement  }} TransitionOpts\n */\n\nconst DEFAULT_DURATION = .240;\nconst DEFAULT_DELAY =    0;\n\n/**\n * \n * @param {TransitionOpts} opts \n * @returns {Promise}\n */\nexport const show = opts =>\n  transition(opts, \"show\");\n\n/**\n * \n * @param {TransitionOpts} opts\n * @returns {Promise} \n */\nexport const hide = opts =>\n  transition(opts, \"hide\");\n\n/**\n * \n * @param {TransitionOpts} opts \n * @param {\"show\"|\"hide\"} state \n * @returns {Promise}\n */\nconst transition = (opts, state) => {\n  const el = opts.el;\n  if (!el) {\n    return Promise.resolve();\n  } else {\n    return new Promise(resolve => {\n      const style = el.style;\n      /**\n       * @type {object} computedStyle\n       */\n      const computedStyle = isClient\n        ? window.getComputedStyle(el)\n        : {};\n      const duration = opts.hasDuration && opts.duration !== undefined\n        ? opts.duration * 1000.0\n        : styleDurationToMs(computedStyle.transitionDuration);\n      const delay = opts.hasDelay && opts.delay !== undefined\n        ? opts.delay * 1000.0\n        : styleDurationToMs(computedStyle.transitionDelay);\n      const timingFunction = opts.timingFunction || computedStyle.transitionTimingFunction;\n\n      if (opts.transitionClass) {\n        const transitionClassElement = opts.transitionClassElement || el;\n        transitionClassElement.classList.add(opts.transitionClass);\n      }\n\n      const before = () => {\n        style.transitionDuration = \"0ms\";\n        style.transitionDelay = \"0ms\";\n        if (opts.before && typeof opts.before === \"function\") {\n          opts.before();\n        }\n      };\n\n      const maybeBefore = (opts.before && state === \"show\")\n        ? before\n        : (opts.before && state === \"hide\")\n          ? before\n          : null;\n\n      const after = () => {\n        if (opts.after && typeof opts.after === \"function\") {\n          opts.after();\n        }\n      };\n\n      const applyTransition = () => {\n        style.transitionDuration = duration + \"ms\";\n        style.transitionDelay = delay + \"ms\";\n\n        if (timingFunction) {\n          style.transitionTimingFunction = timingFunction;\n        }\n        if (opts.showClass) {\n          const showClassElement = opts.showClassElement || el;\n          showClassElement.classList[(state === \"show\") ? \"add\" : \"remove\"](opts.showClass);\n        }\n        if (opts.transition) {\n          opts.transition();\n        }\n      };\n\n      const doTransition = () => {\n        applyTransition();\n        setTimeout(() => {\n          if (after) {\n            after();\n          }\n          if (opts.transitionClass) {\n            const transitionClassElement = opts.transitionClassElement || el;\n            transitionClassElement.classList.remove(opts.transitionClass);\n            el.offsetHeight; // force reflow\n          }\n          resolve();\n        }, duration + delay);\n      };\n\n      const maybeDelayTransition = () => {\n        if (duration === 0) {\n          doTransition();\n        } else {\n          setTimeout(doTransition, 0);\n        }\n      };\n\n      if (maybeBefore) {\n        maybeBefore();\n        el.offsetHeight; // force reflow\n        setTimeout(() => {\n          maybeDelayTransition();\n        }, 0);\n      } else {\n        maybeDelayTransition();\n      }\n    });\n  }\n};\n\n/**\n * \n * @param {object} params\n * @param {boolean} [params.isShow]\n * @param {object} [params.state]\n * @param {object} [params.attrs]\n * @param {Array<HTMLElement>} [params.domElements]\n * @param {() => void} [params.beforeTransition]\n * @param {() => void} [params.afterTransition]\n * @param {string} [params.showClass]\n * @param {string} [params.transitionClass]\n * @returns {Promise}\n */\nexport const transitionComponent = ({ isShow, state, attrs, domElements, beforeTransition, afterTransition, showClass, transitionClass }) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n  state.transitioning(true);\n  state.visible(isShow ? true : false);\n  if (beforeTransition) {\n    beforeTransition();\n  }\n  const duration = attrs[isShow ? \"showDuration\" : \"hideDuration\"];\n  const delay = attrs[isShow ? \"showDelay\" : \"hideDelay\"];\n  const timingFunction = attrs[isShow ? \"showTimingFunction\" : \"hideTimingFunction\"];\n  const transitions = attrs.transitions;\n  const fn = isShow ? show : hide;\n  const opts1 = {\n    ...attrs,\n    ...domElements,\n    showClass,\n    transitionClass,\n    duration,\n    delay,\n    timingFunction\n  };\n  const opts2 = {\n    ...opts1,\n    ...(transitions\n      ? transitions[isShow ? \"show\" : \"hide\"](opts1)\n      : undefined\n    )\n  };\n  const opts3 = {\n    ...opts2,\n    ...{\n      duration: opts2.duration !== undefined\n        ? opts2.duration\n        : DEFAULT_DURATION,\n      hasDuration: opts2.duration !== undefined,\n      delay: opts2.delay !== undefined\n        ? opts2.delay\n        : DEFAULT_DELAY,\n      hasDelay: opts2.delay !== undefined,\n    }\n  };\n  return fn(opts3).then(() => {\n    const id = state.instanceId;\n    if (attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"]) {\n      attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"](id); // when used with Multiple; this will call attrs.didShow / attrs.didHide\n    } else if (attrs[isShow ? \"didShow\" : \"didHide\"]) {\n      attrs[isShow ? \"didShow\" : \"didHide\"](id); // when used directly\n    }\n    if (afterTransition) {\n      afterTransition();\n    }\n    state.transitioning(false);\n  });\n};\n"],"names":["modes","hidden","visible","exposing","hiding","Conditional","getInitialState","vnode","createStream","attrs","didHide","permanent","show","mode","redrawOnUpdate","merge","onUpdate","state","view","h","renderer","placeholder","className","placeholderClassName","inactive","instance","args","hide","undefined","displayName","deprecation","component","option","newOption","newComponent","since","version","console","warn","r","acc","p","defaultAttrs","filterSupportedAttributes","add","remove","removeLookup","reduce","attrsList","concat","supported","filter","item","Object","keys","key","unpackAttrs","sizeClasses","classes","small","regular","medium","large","fab","classForSize","size","isClient","document","isServer","evts","getAnimationEndEvent","el","createElement","a","style","getStyle","element","selector","pseudoSelector","prop","querySelector","currentStyle","window","getComputedStyle","defaultView","getPropertyValue","stylePropCompare","equals","contains","indexOf","isRTL","styleDurationToMs","durationStr","parsed","parseFloat","isNaN","iconDropdownUp","iconDropdownDown","isTouch","documentElement","pointerStartEvent","pointerEndEvent","pointerStartMoveEvent","pointerMoveEvent","pointerEndMoveEvent","htmlElement","classList","listeners","throttle","func","s","context","wait","later","apply","setTimeout","subscribe","eventName","listener","delay","push","unsubscribe","index","splice","emit","event","forEach","addEventListener","e","Multi","mOptions","options","items","current","onChange","error","id","name","itemIndex","findItem","removeItem","replaceItem","newItem","i","length","instanceId","next","defaultId","queue","shift","removeAll","setPauseState","pause","unpause","createItem","itemAttrs","spawn","resolveShow","resolveHide","didShow","showPromise","Promise","resolve","hidePromise","count","spawnOpts","storedItem","clear","candidates","htmlShowClass","holderSelector","position","map","itemData","fromMultipleClear","spawnId","fromMultipleClassName","transitions","fromMultipleDidHide","fromMultipleDidShow","DEFAULT_DURATION","DEFAULT_DELAY","opts","transition","computedStyle","duration","hasDuration","transitionDuration","hasDelay","transitionDelay","timingFunction","transitionTimingFunction","transitionClass","transitionClassElement","before","maybeBefore","after","applyTransition","showClass","showClassElement","doTransition","offsetHeight","maybeDelayTransition","transitionComponent","isShow","domElements","beforeTransition","afterTransition","transitioning","fn","opts1","opts2","opts3","then"],"mappings":"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"}