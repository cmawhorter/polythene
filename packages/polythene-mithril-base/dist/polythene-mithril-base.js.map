{"version":3,"file":"polythene-mithril-base.js","sources":["../src/keys.js","../../../node_modules/mithril/mithril.js","../src/renderer.js","../../../node_modules/mithril/stream/stream.js","../../../node_modules/mithril/stream.js","../src/ComponentCreator.js"],"sourcesContent":["// @ts-check\n\nexport const keys = {\n  autocomplete: \"autocomplete\",\n  autofocus:    \"autofocus\",\n  class:        \"class\",\n  className:    \"class\",\n  enctype:      \"enctype\",\n  formaction:   \"formaction\",\n  frameborder:  \"frameborder\",\n  maxlength:    \"maxlength\",\n  minlength:    \"minlength\",\n  onblur:       \"onblur\",\n  onchange:     \"onchange\",\n  onclick:      \"onclick\",\n  onfocus:      \"onfocus\",\n  oninput:      \"oninput\",\n  onkeydown:    \"onkeydown\",\n  onkeyup:      \"onkeyup\",\n  onmousedown:  \"onmousedown\",\n  onmouseout:   \"onmouseout\",\n  onmouseover:  \"onmouseover\",\n  onmouseup:    \"onmouseup\",\n  onscroll:     \"onscroll\",\n  onsubmit:     \"onsubmit\",\n  ontouchend:   \"ontouchend\",\n  ontouchmove:  \"ontouchmove\",\n  ontouchstart: \"ontouchstart\",\n  readonly:     \"readonly\",\n  tabindex:     \"tabindex\",\n};\n",";(function() {\n\"use strict\"\nfunction Vnode(tag, key, attrs0, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children, text: text, dom: dom, domSize: undefined, state: undefined, _state: undefined, events: undefined, instance: undefined, skip: false}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function normalizeChildren(children) {\n\tfor (var i = 0; i < children.length; i++) {\n\t\tchildren[i] = Vnode.normalize(children[i])\n\t}\n\treturn children\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, attrs, children) {\n\tvar hasAttrs = false, childList, text\n\tvar className = attrs.className || attrs.class\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\t\tfor(var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) {\n\t\t\t\tnewAttrs[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t\tattrs = newAttrs\n\t}\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key)) {\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className !== undefined) {\n\t\tif (attrs.class !== undefined) {\n\t\t\tattrs.class = undefined\n\t\t\tattrs.className = className\n\t\t}\n\t\tif (state.attrs.className != null) {\n\t\t\tattrs.className = state.attrs.className + \" \" + className\n\t\t}\n\t}\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\thasAttrs = true\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\ttext = children[0].children\n\t} else {\n\t\tchildList = children\n\t}\n\treturn Vnode(state.tag, attrs.key, hasAttrs ? attrs : undefined, childList, text)\n}\nfunction hyperscript(selector) {\n\t// Because sloppy mode sucks\n\tvar attrs = arguments[1], start = 2, children\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tif (typeof selector === \"string\") {\n\t\tvar cached = selectorCache[selector] || compileSelector(selector)\n\t}\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = 1\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\tvar normalized = Vnode.normalizeChildren(children)\n\tif (typeof selector === \"string\") {\n\t\treturn execSelector(cached, attrs, normalized)\n\t} else {\n\t\treturn Vnode(selector, attrs.key, attrs, normalized)\n\t}\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function(attrs1, children) {\n\treturn Vnode(\"[\", attrs1.key, attrs1, Vnode.normalizeChildren(children), undefined, undefined)\n}\nvar m = hyperscript\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") global.Promise = PromisePolyfill\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key0 in object) {\n\t\tdestructure(key0, object[key0])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key0, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key0) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\nvar FILE_PROTOCOL_REGEX = new RegExp(\"^file://\", \"i\")\nvar _8 = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\tfunction setCompletionCallback(callback) {oncompletion = callback}\n\tfunction finalizer() {\n\t\tvar count = 0\n\t\tfunction complete() {if (--count === 0 && typeof oncompletion === \"function\") oncompletion()}\n\t\treturn function finalize(promise0) {\n\t\t\tvar then0 = promise0.then\n\t\t\tpromise0.then = function() {\n\t\t\t\tcount++\n\t\t\t\tvar next = then0.apply(promise0, arguments)\n\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\tcomplete()\n\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t})\n\t\t\t\treturn finalize(next)\n\t\t\t}\n\t\t\treturn promise0\n\t\t}\n\t}\n\tfunction normalize(args, extra) {\n\t\tif (typeof args === \"string\") {\n\t\t\tvar url = args\n\t\t\targs = extra || {}\n\t\t\tif (args.url == null) args.url = url\n\t\t}\n\t\treturn args\n\t}\n\tfunction request(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tif (args.method == null) args.method = \"GET\"\n\t\t\targs.method = args.method.toUpperCase()\n\t\t\tvar useBody = (args.method === \"GET\" || args.method === \"TRACE\") ? false : (typeof args.useBody === \"boolean\" ? args.useBody : true)\n\t\t\tif (typeof args.serialize !== \"function\") args.serialize = typeof FormData !== \"undefined\" && args.data instanceof FormData ? function(value) {return value} : JSON.stringify\n\t\t\tif (typeof args.deserialize !== \"function\") args.deserialize = deserialize\n\t\t\tif (typeof args.extract !== \"function\") args.extract = extract\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\tif (useBody) args.data = args.serialize(args.data)\n\t\t\telse args.url = assemble(args.url, args.data)\n\t\t\tvar xhr = new $window.XMLHttpRequest(),\n\t\t\t\taborted = false,\n\t\t\t\t_abort = xhr.abort\n\t\t\txhr.abort = function abort() {\n\t\t\t\taborted = true\n\t\t\t\t_abort.call(xhr)\n\t\t\t}\n\t\t\txhr.open(args.method, args.url, typeof args.async === \"boolean\" ? args.async : true, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (args.serialize === JSON.stringify && useBody && !(args.headers && args.headers.hasOwnProperty(\"Content-Type\"))) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (args.deserialize === deserialize && !(args.headers && args.headers.hasOwnProperty(\"Accept\"))) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tfor (var key in args.headers) if ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif(aborted) return\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar response = (args.extract !== extract) ? args.extract(xhr, args) : args.deserialize(args.extract(xhr, args))\n\t\t\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || FILE_PROTOCOL_REGEX.test(args.url)) {\n\t\t\t\t\t\t\tresolve(cast(args.type, response))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\tfor (var key in response) error[key] = response[key]\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useBody && (args.data != null)) xhr.send(args.data)\n\t\t\telse xhr.send()\n\t\t})\n\t\treturn args.background === true ? promise0 : finalize(promise0)\n\t}\n\tfunction jsonp(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(cast(args.type, data))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tif (args.data == null) args.data = {}\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\targs.data[args.callbackKey || \"callback\"] = callbackName\n\t\t\tscript.src = assemble(args.url, args.data)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t})\n\t\treturn args.background === true? promise0 : finalize(promise0)\n\t}\n\tfunction interpolate(url, data) {\n\t\tif (data == null) return url\n\t\tvar tokens = url.match(/:[^\\/]+/gi) || []\n\t\tfor (var i = 0; i < tokens.length; i++) {\n\t\t\tvar key = tokens[i].slice(1)\n\t\t\tif (data[key] != null) {\n\t\t\t\turl = url.replace(tokens[i], data[key])\n\t\t\t}\n\t\t}\n\t\treturn url\n\t}\n\tfunction assemble(url, data) {\n\t\tvar querystring = buildQueryString(data)\n\t\tif (querystring !== \"\") {\n\t\t\tvar prefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\n\t\t\turl += prefix + querystring\n\t\t}\n\t\treturn url\n\t}\n\tfunction deserialize(data) {\n\t\ttry {return data !== \"\" ? JSON.parse(data) : null}\n\t\tcatch (e) {throw new Error(data)}\n\t}\n\tfunction extract(xhr) {return xhr.responseText}\n\tfunction cast(type0, data) {\n\t\tif (typeof type0 === \"function\") {\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tdata[i] = new type0(data[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse return new type0(data)\n\t\t}\n\t\treturn data\n\t}\n\treturn {request: request, jsonp: jsonp, setCompletionCallback: setCompletionCallback}\n}\nvar requestService = _8(window, PromisePolyfill)\nvar coreRenderer = function($window) {\n\tvar $doc = $window.document\n\tvar $emptyFragment = $doc.createDocumentFragment()\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tvar onevent\n\tfunction setEventCallback(callback) {return onevent = callback}\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": return createText(parent, vnode, nextSibling)\n\t\t\t\tcase \"<\": return createHTML(parent, vnode, nextSibling)\n\t\t\t\tcase \"[\": return createFragment(parent, vnode, hooks, ns, nextSibling)\n\t\t\t\tdefault: return createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse return createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t\treturn vnode.dom\n\t}\n\tfunction createHTML(parent, vnode, nextSibling) {\n\t\tvar match1 = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\tvar parent1 = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}[match1[1]] || \"div\"\n\t\tvar temp = $doc.createElement(parent1)\n\t\ttemp.innerHTML = vnode.children\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs2 = vnode.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tsetLateAttrs(vnode)\n\t\t\t}\n\t\t}\n\t\treturn element\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tvnode._state = vnode.state\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tinitLifecycle(vnode._state, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tvar element = createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t\tinsertNode(parent, element, nextSibling)\n\t\t\treturn element\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t\treturn $emptyFragment\n\t\t}\n\t}\n\t//update\n\tfunction updateNodes(parent, old, vnodes, recycling, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null) removeNodes(old, 0, old.length, vnodes)\n\t\telse {\n\t\t\tif (old.length === vnodes.length) {\n\t\t\t\tvar isUnkeyed = false\n\t\t\t\tfor (var i = 0; i < vnodes.length; i++) {\n\t\t\t\t\tif (vnodes[i] != null && old[i] != null) {\n\t\t\t\t\t\tisUnkeyed = vnodes[i].key == null && old[i].key == null\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isUnkeyed) {\n\t\t\t\t\tfor (var i = 0; i < old.length; i++) {\n\t\t\t\t\t\tif (old[i] === vnodes[i]) continue\n\t\t\t\t\t\telse if (old[i] == null && vnodes[i] != null) createNode(parent, vnodes[i], hooks, ns, getNextSibling(old, i + 1, nextSibling))\n\t\t\t\t\t\telse if (vnodes[i] == null) removeNodes(old, i, i + 1, vnodes)\n\t\t\t\t\t\telse updateNode(parent, old[i], vnodes[i], hooks, getNextSibling(old, i + 1, nextSibling), recycling, ns)\n\t\t\t\t\t}\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\trecycling = recycling || isRecyclable(old, vnodes)\n\t\t\tif (recycling) {\n\t\t\t\tvar pool = old.pool\n\t\t\t\told = old.concat(old.pool)\n\t\t\t}\n\t\t\tvar oldStart = 0, start = 0, oldEnd = old.length - 1, end = vnodes.length - 1, map\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldStart], v = vnodes[start]\n\t\t\t\tif (o === v && !recycling) oldStart++, start++\n\t\t\t\telse if (o == null) oldStart++\n\t\t\t\telse if (v == null) start++\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldStart >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar o = old[oldEnd]\n\t\t\t\t\tif (o === v && !recycling) oldEnd--, start++\n\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\t\tif (recycling || start < end) insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling))\n\t\t\t\t\t\toldEnd--, start++\n\t\t\t\t\t}\n\t\t\t\t\telse break\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldEnd], v = vnodes[end]\n\t\t\t\tif (o === v && !recycling) oldEnd--, end--\n\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\telse if (v == null) end--\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\tif (o.dom != null) nextSibling = o.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (!map) map = getKeyMap(old, oldEnd)\n\t\t\t\t\tif (v != null) {\n\t\t\t\t\t\tvar oldIndex = map[v.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tvar movable = old[oldIndex]\n\t\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldIndex >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\t\tupdateNode(parent, movable, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\tinsertNode(parent, toFragment(movable), nextSibling)\n\t\t\t\t\t\t\told[oldIndex].skip = true\n\t\t\t\t\t\t\tif (movable.dom != null) nextSibling = movable.dom\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar dom = createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\tnextSibling = dom\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend--\n\t\t\t\t}\n\t\t\t\tif (end < start) break\n\t\t\t}\n\t\t\tcreateNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\tremoveNodes(old, oldStart, oldEnd + 1, vnodes)\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode._state = old._state\n\t\t\tvnode.events = old.events\n\t\t\tif (!recycling && shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tif (recycling) {\n\t\t\t\t\t\tvnode.state = {}\n\t\t\t\t\t\tinitLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t\t}\n\t\t\t\t\telse updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, recycling, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old, null)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode, nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, recycling, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, recycling, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle0 multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse if (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode.children, recycling, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tif (recycling) {\n\t\t\tinitComponent(vnode, hooks)\n\t\t} else {\n\t\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tupdateLifecycle(vnode._state, vnode, hooks)\n\t\t}\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, recycling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance, null)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction isRecyclable(old, vnodes) {\n\t\tif (old.pool != null && Math.abs(old.pool.length - vnodes.length) <= Math.abs(old.length - vnodes.length)) {\n\t\t\tvar oldChildrenLength = old[0] && old[0].children && old[0].children.length || 0\n\t\t\tvar poolChildrenLength = old.pool[0] && old.pool[0].children && old.pool[0].children.length || 0\n\t\t\tvar vnodesChildrenLength = vnodes[0] && vnodes[0].children && vnodes[0].children.length || 0\n\t\t\tif (Math.abs(poolChildrenLength - vnodesChildrenLength) <= Math.abs(oldChildrenLength - vnodesChildrenLength)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\tfunction getKeyMap(vnodes, end) {\n\t\tvar map = {}, i = 0\n\t\tfor (var i = 0; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key2 = vnode.key\n\t\t\t\tif (key2 != null) map[key2] = i\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\tfunction toFragment(vnode) {\n\t\tvar count0 = vnode.domSize\n\t\tif (count0 != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count0 > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count0) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling && nextSibling.parentNode) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction setContentEditable(vnode) {\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\t//remove\n\tfunction removeNodes(vnodes, start, end, context) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tif (vnode.skip) vnode.skip = false\n\t\t\t\telse removeNode(vnode, context)\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNode(vnode, context) {\n\t\tvar expected = 1, called = 0\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode.attrs.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode._state.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar count0 = vnode.domSize || 1\n\t\t\t\t\tif (count0 > 1) {\n\t\t\t\t\t\tvar dom = vnode.dom\n\t\t\t\t\t\twhile (--count0) {\n\t\t\t\t\t\t\tremoveNodeFromDOM(dom.nextSibling)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tremoveNodeFromDOM(vnode.dom)\n\t\t\t\t\tif (context != null && vnode.domSize == null && !hasIntegrationMethods(vnode.attrs) && typeof vnode.tag === \"string\") { //TODO test custom elements\n\t\t\t\t\t\tif (!context.pool) context.pool = [vnode]\n\t\t\t\t\t\telse context.pool.push(vnode)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNodeFromDOM(node) {\n\t\tvar parent = node.parentNode\n\t\tif (parent != null) parent.removeChild(node)\n\t}\n\tfunction onremove(vnode) {\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") vnode.attrs.onremove.call(vnode.state, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (typeof vnode._state.onremove === \"function\") vnode._state.onremove.call(vnode.state, vnode)\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode, attrs2, ns) {\n\t\tfor (var key2 in attrs2) {\n\t\t\tsetAttr(vnode, key2, null, attrs2[key2], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key2, old, value, ns) {\n\t\tvar element = vnode.dom\n\t\tif (key2 === \"key\" || key2 === \"is\" || (old === value && !isFormAttribute(vnode, key2)) && typeof value !== \"object\" || typeof value === \"undefined\" || isLifecycleMethod(key2)) return\n\t\tvar nsLastIndex = key2.indexOf(\":\")\n\t\tif (nsLastIndex > -1 && key2.substr(0, nsLastIndex) === \"xlink\") {\n\t\t\telement.setAttributeNS(\"http://www.w3.org/1999/xlink\", key2.slice(nsLastIndex + 1), value)\n\t\t}\n\t\telse if (key2[0] === \"o\" && key2[1] === \"n\" && typeof value === \"function\") updateEvent(vnode, key2, value)\n\t\telse if (key2 === \"style\") updateStyle(element, old, value)\n\t\telse if (key2 in element && !isAttribute(key2) && ns === undefined && !isCustomElement(vnode)) {\n\t\t\tif (key2 === \"value\") {\n\t\t\t\tvar normalized0 = \"\" + value // eslint-disable-line no-implicit-coercion\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\") {\n\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\tif (vnode.dom.selectedIndex === -1 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (old !== null && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old != null && vnode.dom.value === normalized0) return\n\t\t\t}\n\t\t\t// If you assign an input type1 that is not supported by IE 11 with an assignment expression, an error0 will occur.\n\t\t\tif (vnode.tag === \"input\" && key2 === \"type\") {\n\t\t\t\telement.setAttribute(key2, value)\n\t\t\t\treturn\n\t\t\t}\n\t\t\telement[key2] = value\n\t\t}\n\t\telse {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) element.setAttribute(key2, \"\")\n\t\t\t\telse element.removeAttribute(key2)\n\t\t\t}\n\t\t\telse element.setAttribute(key2 === \"className\" ? \"class\" : key2, value)\n\t\t}\n\t}\n\tfunction setLateAttrs(vnode) {\n\t\tvar attrs2 = vnode.attrs\n\t\tif (vnode.tag === \"select\" && attrs2 != null) {\n\t\t\tif (\"value\" in attrs2) setAttr(vnode, \"value\", null, attrs2.value, undefined)\n\t\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t\t}\n\t}\n\tfunction updateAttrs(vnode, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key2 in attrs2) {\n\t\t\t\tsetAttr(vnode, key2, old && old[key2], attrs2[key2], ns)\n\t\t\t}\n\t\t}\n\t\tif (old != null) {\n\t\t\tfor (var key2 in old) {\n\t\t\t\tif (attrs2 == null || !(key2 in attrs2)) {\n\t\t\t\t\tif (key2 === \"className\") key2 = \"class\"\n\t\t\t\t\tif (key2[0] === \"o\" && key2[1] === \"n\" && !isLifecycleMethod(key2)) updateEvent(vnode, key2, undefined)\n\t\t\t\t\telse if (key2 !== \"key\") vnode.dom.removeAttribute(key2)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction isAttribute(attr) {\n\t\treturn attr === \"href\" || attr === \"list\" || attr === \"form\" || attr === \"width\" || attr === \"height\"// || attr === \"type\"\n\t}\n\tfunction isCustomElement(vnode){\n\t\treturn vnode.attrs.is || vnode.tag.indexOf(\"-\") > -1\n\t}\n\tfunction hasIntegrationMethods(source) {\n\t\treturn source != null && (source.oncreate || source.onupdate || source.onbeforeremove || source.onremove)\n\t}\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) element.style.cssText = \"\", old = null\n\t\tif (style == null) element.style.cssText = \"\"\n\t\telse if (typeof style === \"string\") element.style.cssText = style\n\t\telse {\n\t\t\tif (typeof old === \"string\") element.style.cssText = \"\"\n\t\t\tfor (var key2 in style) {\n\t\t\t\telement.style[key2] = style[key2]\n\t\t\t}\n\t\t\tif (old != null && typeof old !== \"string\") {\n\t\t\t\tfor (var key2 in old) {\n\t\t\t\t\tif (!(key2 in style)) element.style[key2] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode, key2, value) {\n\t\tvar element = vnode.dom\n\t\tvar callback = typeof onevent !== \"function\" ? value : function(e) {\n\t\t\tvar result = value.call(element, e)\n\t\t\tonevent.call(element, e)\n\t\t\treturn result\n\t\t}\n\t\tif (key2 in element) element[key2] = typeof value === \"function\" ? callback : null\n\t\telse {\n\t\t\tvar eventName = key2.slice(2)\n\t\t\tif (vnode.events === undefined) vnode.events = {}\n\t\t\tif (vnode.events[key2] === callback) return\n\t\t\tif (vnode.events[key2] != null) element.removeEventListener(eventName, vnode.events[key2], false)\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tvnode.events[key2] = callback\n\t\t\t\telement.addEventListener(eventName, vnode.events[key2], false)\n\t\t\t}\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") source.oninit.call(vnode.state, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(source.oncreate.bind(vnode.state, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(source.onupdate.bind(vnode.state, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tvar forceVnodeUpdate, forceComponentUpdate\n\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") forceVnodeUpdate = vnode.attrs.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeupdate === \"function\") forceComponentUpdate = vnode._state.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (!(forceVnodeUpdate === undefined && forceComponentUpdate === undefined) && !forceVnodeUpdate && !forceComponentUpdate) {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = $doc.activeElement\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time0 rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tif (!Array.isArray(vnodes)) vnodes = [vnodes]\n\t\tupdateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), false, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\tdom.vnodes = vnodes\n\t\t// document.activeElement can return null in IE https://developer.mozilla.org/en-US/docs/Web/API/Document/activeElement\n\t\tif (active != null && $doc.activeElement !== active) active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n\treturn {render: render, setEventCallback: setEventCallback}\n}\nfunction throttle(callback) {\n\t//60fps translates to 16.6ms, round it down since setTimeout requires int\n\tvar time = 16\n\tvar last = 0, pending = null\n\tvar timeout = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setTimeout\n\treturn function() {\n\t\tvar now = Date.now()\n\t\tif (last === 0 || now - last >= time) {\n\t\t\tlast = now\n\t\t\tcallback()\n\t\t}\n\t\telse if (pending === null) {\n\t\t\tpending = timeout(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t\tlast = Date.now()\n\t\t\t}, time - (now - last))\n\t\t}\n\t}\n}\nvar _11 = function($window) {\n\tvar renderService = coreRenderer($window)\n\trenderService.setEventCallback(function(e) {\n\t\tif (e.redraw === false) e.redraw = undefined\n\t\telse redraw()\n\t})\n\tvar callbacks = []\n\tfunction subscribe(key1, callback) {\n\t\tunsubscribe(key1)\n\t\tcallbacks.push(key1, throttle(callback))\n\t}\n\tfunction unsubscribe(key1) {\n\t\tvar index = callbacks.indexOf(key1)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n\tfunction redraw() {\n\t\tfor (var i = 1; i < callbacks.length; i += 2) {\n\t\t\tcallbacks[i]()\n\t\t}\n\t}\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\nvar redrawService = _11(window)\nrequestService.setCompletionCallback(redrawService.redraw)\nvar _16 = function(redrawService0) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService0.render(root, [])\n\t\t\tredrawService0.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null && typeof component !== \"function\") throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run0 = function() {\n\t\t\tredrawService0.render(root, Vnode(component))\n\t\t}\n\t\tredrawService0.subscribe(root, run0)\n\t\tredrawService0.redraw()\n\t}\n}\nm.mount = _16(redrawService)\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), data0 = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j).join()\n\t\t\t\tif (counters[key5] == null) counters[key5] = 0\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data0\n}\nvar coreRouter = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction normalize1(fragment0) {\n\t\tvar data = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment0 === \"pathname\" && data[0] !== \"/\") data = \"/\" + data\n\t\treturn data\n\t}\n\tvar asyncId\n\tfunction debounceAsync(callback0) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync0(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback0()\n\t\t\t})\n\t\t}\n\t}\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key4 in queryParams) queryData[key4] = queryParams[key4]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key4 in hashParams) hashData[key4] = hashParams[key4]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type2 = router.prefix.charAt(0)\n\t\tswitch (type2) {\n\t\t\tcase \"#\": return normalize1(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize1(\"search\").slice(router.prefix.length) + normalize1(\"hash\")\n\t\t\tdefault: return normalize1(\"pathname\").slice(router.prefix.length) + normalize1(\"search\") + normalize1(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data != null) {\n\t\t\tfor (var key4 in data) queryData[key4] = data[key4]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match2, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data[token]\n\t\t\t})\n\t\t}\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\t\tif (supportsPushState) {\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\t$window.onpopstate()\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, router.prefix + path)\n\t\t\telse $window.history.pushState(state, title, router.prefix + path)\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\tvar state = $window.history.state\n\t\t\tif (state != null) {\n\t\t\t\tfor (var k in state) params[k] = state[k]\n\t\t\t}\n\t\t\tfor (var route0 in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route0.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route0], params, path, route0)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(path, params)\n\t\t}\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\treturn router\n}\nvar _20 = function($window, redrawService0) {\n\tvar routeService = coreRouter($window)\n\tvar identity = function(v) {return v}\n\tvar render1, component, attrs3, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar run1 = function() {\n\t\t\tif (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)))\n\t\t}\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\tattrs3 = params, currentPath = path, lastUpdate = null\n\t\t\t\trender1 = (routeResolver.render || identity).bind(routeResolver)\n\t\t\t\trun1()\n\t\t\t}\n\t\t\tif (payload.view || typeof payload === \"function\") update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail)\n\t\tredrawService0.subscribe(root, run1)\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix0) {routeService.prefix = prefix0}\n\troute.link = function(vnode1) {\n\t\tvnode1.dom.setAttribute(\"href\", routeService.prefix + vnode1.attrs.href)\n\t\tvnode1.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, undefined)\n\t\t}\n\t}\n\troute.param = function(key3) {\n\t\tif(typeof attrs3 !== \"undefined\" && typeof key3 !== \"undefined\") return attrs3[key3]\n\t\treturn attrs3\n\t}\n\treturn route\n}\nm.route = _20(window, redrawService)\nm.withAttr = function(attrName, callback1, context) {\n\treturn function(e) {\n\t\tcallback1.call(context || this, attrName in e.currentTarget ? e.currentTarget[attrName] : e.currentTarget.getAttribute(attrName))\n\t}\n}\nvar _28 = coreRenderer(window)\nm.render = _28.render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.version = \"1.1.6\"\nm.vnode = Vnode\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}());","import m from \"mithril\";\n\nexport const renderer = m;\nrenderer[\"displayName\"] = \"mithril\";\n","/* eslint-disable */\n;(function() {\n\"use strict\"\n/* eslint-enable */\n\nvar guid = 0, HALT = {}\nfunction createStream() {\n\tfunction stream() {\n\t\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\t\treturn stream._state.value\n\t}\n\tinitStream(stream)\n\n\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\n\treturn stream\n}\nfunction initStream(stream) {\n\tstream.constructor = createStream\n\tstream._state = {id: guid++, value: undefined, state: 0, derive: undefined, recover: undefined, deps: {}, parents: [], endStream: undefined, unregister: undefined}\n\tstream.map = stream[\"fantasy-land/map\"] = map, stream[\"fantasy-land/ap\"] = ap, stream[\"fantasy-land/of\"] = createStream\n\tstream.valueOf = valueOf, stream.toJSON = toJSON, stream.toString = valueOf\n\n\tObject.defineProperties(stream, {\n\t\tend: {get: function() {\n\t\t\tif (!stream._state.endStream) {\n\t\t\t\tvar endStream = createStream()\n\t\t\t\tendStream.map(function(value) {\n\t\t\t\t\tif (value === true) {\n\t\t\t\t\t\tunregisterStream(stream)\n\t\t\t\t\t\tendStream._state.unregister = function(){unregisterStream(endStream)}\n\t\t\t\t\t}\n\t\t\t\t\treturn value\n\t\t\t\t})\n\t\t\t\tstream._state.endStream = endStream\n\t\t\t}\n\t\t\treturn stream._state.endStream\n\t\t}}\n\t})\n}\nfunction updateStream(stream, value) {\n\tupdateState(stream, value)\n\tfor (var id in stream._state.deps) updateDependency(stream._state.deps[id], false)\n\tif (stream._state.unregister != null) stream._state.unregister()\n\tfinalize(stream)\n}\nfunction updateState(stream, value) {\n\tstream._state.value = value\n\tstream._state.changed = true\n\tif (stream._state.state !== 2) stream._state.state = 1\n}\nfunction updateDependency(stream, mustSync) {\n\tvar state = stream._state, parents = state.parents\n\tif (parents.length > 0 && parents.every(active) && (mustSync || parents.some(changed))) {\n\t\tvar value = stream._state.derive()\n\t\tif (value === HALT) return false\n\t\tupdateState(stream, value)\n\t}\n}\nfunction finalize(stream) {\n\tstream._state.changed = false\n\tfor (var id in stream._state.deps) stream._state.deps[id]._state.changed = false\n}\n\nfunction combine(fn, streams) {\n\tif (!streams.every(valid)) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge is a stream\")\n\treturn initDependency(createStream(), streams, function() {\n\t\treturn fn.apply(this, streams.concat([streams.filter(changed)]))\n\t})\n}\n\nfunction initDependency(dep, streams, derive) {\n\tvar state = dep._state\n\tstate.derive = derive\n\tstate.parents = streams.filter(notEnded)\n\n\tregisterDependency(dep, state.parents)\n\tupdateDependency(dep, true)\n\n\treturn dep\n}\nfunction registerDependency(stream, parents) {\n\tfor (var i = 0; i < parents.length; i++) {\n\t\tparents[i]._state.deps[stream._state.id] = stream\n\t\tregisterDependency(stream, parents[i]._state.parents)\n\t}\n}\nfunction unregisterStream(stream) {\n\tfor (var i = 0; i < stream._state.parents.length; i++) {\n\t\tvar parent = stream._state.parents[i]\n\t\tdelete parent._state.deps[stream._state.id]\n\t}\n\tfor (var id in stream._state.deps) {\n\t\tvar dependent = stream._state.deps[id]\n\t\tvar index = dependent._state.parents.indexOf(stream)\n\t\tif (index > -1) dependent._state.parents.splice(index, 1)\n\t}\n\tstream._state.state = 2 //ended\n\tstream._state.deps = {}\n}\n\nfunction map(fn) {return combine(function(stream) {return fn(stream())}, [this])}\nfunction ap(stream) {return combine(function(s1, s2) {return s1()(s2())}, [stream, this])}\nfunction valueOf() {return this._state.value}\nfunction toJSON() {return this._state.value != null && typeof this._state.value.toJSON === \"function\" ? this._state.value.toJSON() : this._state.value}\n\nfunction valid(stream) {return stream._state }\nfunction active(stream) {return stream._state.state === 1}\nfunction changed(stream) {return stream._state.changed}\nfunction notEnded(stream) {return stream._state.state !== 2}\n\nfunction merge(streams) {\n\treturn combine(function() {\n\t\treturn streams.map(function(s) {return s()})\n\t}, streams)\n}\n\nfunction scan(reducer, seed, stream) {\n\tvar newStream = combine(function (s) {\n\t\treturn seed = reducer(seed, s._state.value)\n\t}, [stream])\n\n\tif (newStream._state.state === 0) newStream(seed)\n\n\treturn newStream\n}\n\nfunction scanMerge(tuples, seed) {\n\tvar streams = tuples.map(function(tuple) {\n\t\tvar stream = tuple[0]\n\t\tif (stream._state.state === 0) stream(undefined)\n\t\treturn stream\n\t})\n\n\tvar newStream = combine(function() {\n\t\tvar changed = arguments[arguments.length - 1]\n\n\t\tstreams.forEach(function(stream, idx) {\n\t\t\tif (changed.indexOf(stream) > -1) {\n\t\t\t\tseed = tuples[idx][1](seed, stream._state.value)\n\t\t\t}\n\t\t})\n\n\t\treturn seed\n\t}, streams)\n\n\treturn newStream\n}\n\ncreateStream[\"fantasy-land/of\"] = createStream\ncreateStream.merge = merge\ncreateStream.combine = combine\ncreateStream.scan = scan\ncreateStream.scanMerge = scanMerge\ncreateStream.HALT = HALT\n\nif (typeof module !== \"undefined\") module[\"exports\"] = createStream\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = createStream\nelse window.m = {stream : createStream}\n\n}());\n","\"use strict\"\n\nmodule.exports = require(\"./stream/stream\")\n","// @ts-check\n\n/**\n * @typedef {import(\"mithril\").Vnode} Vnode\n * @typedef {import(\"../index\")}\n * @typedef {import(\"../index\").ComponentCreatorOptions} ComponentCreatorOptions\n */\n\nimport stream from \"mithril/stream\";\nimport { renderer } from \"./renderer\";\nimport { keys } from \"./keys\";\n\nconst requiresKeys = false;\n\n/**\n * @param {ComponentCreatorOptions} params\n */\nexport const ComponentCreator = ({\n  createContent = () => null,\n  createProps = () => ({}),\n  component = null,\n  getElement = () => \"div\",\n  getInitialState = () => ({}),\n  onMount = () => null,\n  onUnMount = () => null,\n  onUpdate = () => null,\n  view = null,\n}) => {\n\n  const localState = {\n    mounted: false\n  };\n\n  /**\n   * @param {Vnode} vnode \n   */\n  const oninit = vnode => {\n    /**\n     * @type {{ redrawOnUpdate?: Array<function>, _?: any }} initialState\n     */\n    const initialState = getInitialState(vnode, stream, { keys });\n    Object.assign(vnode.state, initialState);\n\n    initialState.redrawOnUpdate !== undefined\n      ? initialState.redrawOnUpdate.map(() => (\n        localState && setTimeout(renderer.redraw)\n      ))\n      : undefined;\n  };\n\n  /**\n   * @param {Vnode} vnode \n   */\n  const oncreate = vnode => {\n    localState.mounted = true;\n    onMount(vnode, { keys });\n  };\n\n  /**\n   * @param {Vnode} vnode \n   */\n  const render = vnode => {\n    return renderer(\n      component || getElement(vnode),\n      createProps(vnode, { renderer, requiresKeys, keys }),\n      [\n        vnode.attrs.before,\n        createContent(vnode, { renderer, requiresKeys, keys }),\n        vnode.attrs.after\n      ]\n    );\n  };\n\n  return {\n    view: view\n      ?\n      /**\n       * @param {Vnode} vnode\n       */\n      vnode => view(vnode, { render, renderer })\n      :\n      /**\n       * @param {Vnode} vnode\n       */\n      vnode => render(vnode),\n    oninit,\n    oncreate,\n    onremove: onUnMount,\n    onupdate: onUpdate,\n  };\n};\n"],"names":["keys","autocomplete","autofocus","class","className","enctype","formaction","frameborder","maxlength","minlength","onblur","onchange","onclick","onfocus","oninput","onkeydown","onkeyup","onmousedown","onmouseout","onmouseover","onmouseup","onscroll","onsubmit","ontouchend","ontouchmove","ontouchstart","readonly","tabindex","Vnode","tag","key","attrs0","children","text","dom","attrs","domSize","undefined","state","_state","events","instance","skip","normalize","node","Array","isArray","normalizeChildren","i","length","selectorParser","selectorCache","hasOwn","hasOwnProperty","isEmpty","object","call","compileSelector","selector","match","classes","exec","type","value","id","push","attrValue","replace","join","execSelector","hasAttrs","childList","newAttrs","hyperscript","arguments","start","view","Error","cached","normalized","trust","html","fragment","attrs1","m","PromisePolyfill","executor","TypeError","self","resolvers","rejectors","resolveCurrent","handler","rejectCurrent","_instance","callAsync","setImmediate","setTimeout","list","shouldAbsorb","execute","then","executeOnce","bind","console","error","retry","e","runs","run","fn","onerror","prototype","onFulfilled","onRejection","handle","callback","next","resolveNext","rejectNext","promise","resolve","reject","catch","all","total","count","values","consume","race","window","Promise","global","buildQueryString","Object","toString","args","key0","destructure","encodeURIComponent","FILE_PROTOCOL_REGEX","RegExp","_8","$window","callbackCount","oncompletion","setCompletionCallback","finalizer","complete","finalize","promise0","then0","apply","extra","url","request","method","toUpperCase","useBody","serialize","FormData","data","JSON","stringify","deserialize","extract","interpolate","assemble","xhr","XMLHttpRequest","aborted","_abort","abort","open","async","user","password","headers","setRequestHeader","withCredentials","config","onreadystatechange","readyState","response","status","test","cast","responseText","send","background","jsonp","callbackName","Math","round","random","script","document","createElement","parentNode","removeChild","callbackKey","src","documentElement","appendChild","tokens","slice","querystring","prefix","indexOf","parse","type0","requestService","coreRenderer","$doc","$emptyFragment","createDocumentFragment","nameSpace","svg","math","onevent","setEventCallback","getNameSpace","vnode","xmlns","createNodes","parent","vnodes","end","hooks","nextSibling","ns","createNode","initLifecycle","createText","createHTML","createFragment","createComponent","createTextNode","insertNode","match1","parent1","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","temp","innerHTML","firstChild","childNodes","child","attrs2","is","element","createElementNS","setAttrs","contenteditable","setContentEditable","textContent","setLateAttrs","initComponent","sentinel","create","$$reentrantLock$$","updateNodes","old","recycling","removeNodes","isUnkeyed","getNextSibling","updateNode","isRecyclable","pool","concat","oldStart","oldEnd","map","o","v","shouldRecycle","toFragment","getKeyMap","oldIndex","movable","oldTag","shouldNotUpdate","updateLifecycle","updateText","updateHTML","updateFragment","updateElement","updateComponent","removeNode","nodeValue","updateAttrs","abs","oldChildrenLength","poolChildrenLength","vnodesChildrenLength","key2","count0","insertBefore","content","context","expected","called","onbeforeremove","result","continuation","onremove","removeNodeFromDOM","hasIntegrationMethods","setAttr","isFormAttribute","isLifecycleMethod","nsLastIndex","substr","setAttributeNS","updateEvent","updateStyle","isAttribute","isCustomElement","normalized0","activeElement","selectedIndex","setAttribute","removeAttribute","attr","source","oncreate","onupdate","style","cssText","eventName","removeEventListener","addEventListener","oninit","forceVnodeUpdate","forceComponentUpdate","onbeforeupdate","render","active","namespace","namespaceURI","focus","throttle","time","last","pending","timeout","requestAnimationFrame","now","Date","_11","renderService","redraw","callbacks","subscribe","key1","unsubscribe","index","splice","redrawService","_16","redrawService0","root","component","run0","mount","parseQueryString","string","charAt","entries","split","data0","counters","entry","key5","decodeURIComponent","levels","cursor","pop","j","level","nextLevel","isNumber","isNaN","parseInt","isValue","coreRouter","supportsPushState","history","pushState","callAsync0","normalize1","fragment0","location","asyncId","debounceAsync","callback0","parsePath","path","queryData","hashData","queryIndex","hashIndex","pathEnd","queryEnd","queryParams","key4","hashParams","router","getPath","type2","setPath","options","match2","token","query","hash","title","onpopstate","replaceState","href","defineRoutes","routes","resolveRoute","params","pathname","k","route0","matcher","onhashchange","_20","routeService","identity","render1","attrs3","currentPath","lastUpdate","route","defaultRoute","run1","bail","payload","update","routeResolver","comp","onmatch","resolved","set","get","prefix0","link","vnode1","ctrlKey","metaKey","shiftKey","which","preventDefault","getAttribute","param","key3","withAttr","attrName","callback1","currentTarget","_28","version","module","renderer","guid","HALT","createStream","stream","updateStream","initStream","constructor","derive","recover","deps","parents","endStream","unregister","ap","valueOf","toJSON","defineProperties","unregisterStream","updateState","updateDependency","changed","mustSync","every","some","combine","streams","valid","initDependency","filter","dep","notEnded","registerDependency","dependent","s1","s2","merge","s","scan","reducer","seed","newStream","scanMerge","tuples","tuple","forEach","idx","require$$0","requiresKeys","ComponentCreator","createContent","createProps","getElement","getInitialState","onMount","onUnMount","onUpdate","localState","mounted","initialState","redrawOnUpdate","before","after"],"mappings":"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"}