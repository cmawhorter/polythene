{"version":3,"file":"polythene-core-dialog-pane.js","sources":["../../polythene-css-classes/dialog-pane.js","../../polythene-css-classes/button.js","../src/dialog-pane.js"],"sourcesContent":["\nexport default {\n  component:         \"pe-dialog-pane\",\n\n  // elements\n  actions:           \"pe-dialog-pane__actions\",\n  body:              \"pe-dialog-pane__body\",\n  content:           \"pe-dialog-pane__content\",\n  footer:            \"pe-dialog-pane__footer\",\n  header:            \"pe-dialog-pane__header\",\n  title:             \"pe-dialog-pane__title\",\n\n  // states\n  withHeader:        \"pe-dialog-pane--header\",\n  withFooter:        \"pe-dialog-pane--footer\",\n  headerWithTitle:   \"pe-dialog-pane__header--title\",\n  footerWithButtons: \"pe-dialog-pane__footer--buttons\",\n  footerHigh:        \"pe-dialog-pane__footer--high\",\n  borderBottom:      \"pe-dialog-pane--border-bottom\",\n  borderTop:         \"pe-dialog-pane--border-top\",\n  fullBleed:         \"pe-dialog-pane--body-full-bleed\",\n};\n","\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n};\n","import { filterSupportedAttributes, unpackAttrs, subscribe, unsubscribe } from \"polythene-core\";\nimport classes from \"polythene-css-classes/dialog-pane\";\nimport buttonClasses from \"polythene-css-classes/button\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"form\";\n\nconst SCROLL_WATCH_END_TIMER = 150;\n\nconst updateScrollOverflowState = vnode => {\n  const state = vnode.state;\n  const scroller = state.scrollEl();\n  if (!scroller) {\n    return;\n  }\n  state.topOverflow(scroller.scrollTop > 0);\n  state.bottomOverflow(scroller.scrollHeight - (scroller.scrollTop + scroller.getBoundingClientRect().height) > 0);\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const bottomOverflow = createStream(false); \n  const footerEl = createStream(null);\n  const headerEl = createStream(null);\n  const isScrolling = createStream(false);\n  const scrollEl = createStream(null);\n  const topOverflow = createStream(false);\n  const el = createStream(null);\n  \n  return {\n    cleanUp: undefined,\n    bottomOverflow,\n    el,\n    footerEl,\n    headerEl,\n    isScrolling,\n    scrollEl,\n    scrollWatchId: undefined,\n    topOverflow,\n    redrawOnUpdate: createStream.merge([topOverflow, bottomOverflow, isScrolling])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  state.el(dom);\n\n  state.scrollEl(dom.querySelector(`.${classes.body}`));\n  state.footerEl(dom.querySelector(`.${classes.footer}`));\n  state.headerEl(dom.querySelector(`.${classes.header}`));\n\n  state.isScrolling.map(() =>\n    updateScrollOverflowState(vnode)\n  );\n\n  const update = () => {\n    updateScrollOverflowState(vnode);\n  };\n\n  state.cleanUp = () => (\n    unsubscribe(\"resize\", update)\n  );\n\n  // resize: update scroll state (\"overflow\" borders)\n  subscribe(\"resize\", update);\n\n  update();\n};\n\nexport const onUnMount = vnode => (\n  vnode.state.cleanUp()\n);\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = unpackAttrs(vnode.attrs);\n  const withHeader = attrs.header !== undefined || attrs.title !== undefined;\n  const withFooter = attrs.footer !== undefined || attrs.footerButtons !== undefined;\n  const borders = attrs.borders || \"overflow\";\n  const showTopBorder = borders === \"always\" || (withHeader && borders === \"overflow\" && state.topOverflow());\n  const showBottomBorder = borders === \"always\" || (withFooter && borders === \"overflow\" && state.bottomOverflow());\n  \n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs, { remove: [\"style\"] }), // style set in content, and set by show/hide transition\n    {\n      className: [\n        classes.component,\n        attrs.fullBleed ? classes.fullBleed : null,\n        showTopBorder ? classes.borderTop : null,\n        showBottomBorder ? classes.borderBottom : null,\n        withHeader ? classes.withHeader : null,\n        withFooter ? classes.withFooter : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    },\n    attrs.formOptions\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k }) => {\n  const state = vnode.state;\n  const attrs = unpackAttrs(vnode.attrs);\n\n  return h(\"div\",\n    {\n      className: [\n        classes.content,\n        attrs.menu ? classes.menuContent : null\n      ].join(\" \"),\n      style: attrs.style\n    },\n    [\n      attrs.header\n        ? attrs.header\n        : attrs.title\n          ? h(\"div\",\n            {\n              className: [\n                classes.header,\n                classes.headerWithTitle\n              ].join(\" \"),\n              key: \"title\"\n            },\n            h(\"div\",\n              { className: classes.title },\n              attrs.title\n            )\n          )\n          : null,\n      h(\"div\",\n        {\n          className: classes.body,\n          key: \"body\",\n          [k.onscroll]: () => {\n            state.isScrolling(true);\n            clearTimeout(state.scrollWatchId);\n            state.scrollWatchId = setTimeout(() => {\n              state.isScrolling(false);\n            }, SCROLL_WATCH_END_TIMER);\n          }\n        },\n        attrs.content || attrs.body || attrs.menu\n      ),\n      attrs.footer\n        ? h(\"div\",\n          {\n            className: classes.footer,\n            key: \"footer\"\n          },\n          attrs.footer\n        )\n        : attrs.footerButtons\n          ? h(\"div\",\n            {\n              className: [\n                classes.footer,\n                classes.footerWithButtons,\n                buttonClasses.row\n              ].join(\" \"),\n              key: \"footer\"\n            },\n            h(\"div\",\n              { className: classes.actions },\n              attrs.footerButtons\n            )\n          )\n          : null\n    ]\n  );\n};\n"],"names":["component","actions","body","content","footer","header","title","withHeader","withFooter","headerWithTitle","footerWithButtons","footerHigh","borderBottom","borderTop","fullBleed","super","row","label","textLabel","wash","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","getElement","vnode","attrs","element","SCROLL_WATCH_END_TIMER","updateScrollOverflowState","state","scroller","scrollEl","topOverflow","scrollTop","bottomOverflow","scrollHeight","getBoundingClientRect","height","getInitialState","createStream","footerEl","headerEl","isScrolling","el","cleanUp","undefined","scrollWatchId","redrawOnUpdate","merge","onMount","dom","querySelector","classes","map","update","unsubscribe","subscribe","onUnMount","createProps","k","keys","unpackAttrs","footerButtons","borders","showTopBorder","showBottomBorder","filterSupportedAttributes","remove","className","tone","class","join","formOptions","createContent","h","renderer","menu","menuContent","style","key","onscroll","clearTimeout","setTimeout","buttonClasses"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,gBAAe;EACbA,EAAAA,SAAS,EAAU,gBADN;EAGb;EACAC,EAAAA,OAAO,EAAY,yBAJN;EAKbC,EAAAA,IAAI,EAAe,sBALN;EAMbC,EAAAA,OAAO,EAAY,yBANN;EAObC,EAAAA,MAAM,EAAa,wBAPN;EAQbC,EAAAA,MAAM,EAAa,wBARN;EASbC,EAAAA,KAAK,EAAc,uBATN;EAWb;EACAC,EAAAA,UAAU,EAAS,wBAZN;EAabC,EAAAA,UAAU,EAAS,wBAbN;EAcbC,EAAAA,eAAe,EAAI,+BAdN;EAebC,EAAAA,iBAAiB,EAAE,iCAfN;EAgBbC,EAAAA,UAAU,EAAS,8BAhBN;EAiBbC,EAAAA,YAAY,EAAO,+BAjBN;EAkBbC,EAAAA,SAAS,EAAU,4BAlBN;EAmBbC,EAAAA,SAAS,EAAU;EAnBN,CAAf;;ACAA,sBAAe;EACbd,EAAAA,SAAS,EAAS,gBADL;EAEbe,EAAAA,KAAK,EAAa,WAFL;EAGbC,EAAAA,GAAG,EAAe,eAHL;EAKb;EACAb,EAAAA,OAAO,EAAW,oBANL;EAObc,EAAAA,KAAK,EAAa,kBAPL;EAQbC,EAAAA,SAAS,EAAS,uBARL;EASbC,EAAAA,IAAI,EAAc,iBATL;EAUbC,EAAAA,QAAQ,EAAU,qBAVL;EAYb;EACAC,EAAAA,MAAM,EAAY,mBAbL;EAcbC,EAAAA,SAAS,EAAS,sBAdL;EAebC,EAAAA,QAAQ,EAAU,qBAfL;EAgBbC,EAAAA,cAAc,EAAI,4BAhBL;EAiBbC,EAAAA,YAAY,EAAM,0BAjBL;EAkBbC,EAAAA,SAAS,EAAS,uBAlBL;EAmBbC,EAAAA,WAAW,EAAO,qBAnBL;EAoBbC,EAAAA,SAAS,EAAS,uBApBL;EAqBbC,EAAAA,QAAQ,EAAU,qBArBL;EAsBbC,EAAAA,MAAM,EAAY,mBAtBL;EAuBbC,EAAAA,QAAQ,EAAU,qBAvBL;EAwBbC,EAAAA,gBAAgB,EAAE;EAxBL,CAAf;;ECGO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK;EAAA,SAC7BA,KAAK,CAACC,KAAN,CAAYC,OAAZ,IAAuB,MADM;EAAA,CAAxB;EAGP,IAAMC,sBAAsB,GAAG,GAA/B;;EAEA,IAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAAJ,KAAK,EAAI;EACzC,MAAMK,KAAK,GAAGL,KAAK,CAACK,KAApB;EACA,MAAMC,QAAQ,GAAGD,KAAK,CAACE,QAAN,EAAjB;;EACA,MAAI,CAACD,QAAL,EAAe;EACb;EACD;;EACDD,EAAAA,KAAK,CAACG,WAAN,CAAkBF,QAAQ,CAACG,SAAT,GAAqB,CAAvC;EACAJ,EAAAA,KAAK,CAACK,cAAN,CAAqBJ,QAAQ,CAACK,YAAT,IAAyBL,QAAQ,CAACG,SAAT,GAAqBH,QAAQ,CAACM,qBAAT,GAAiCC,MAA/E,IAAyF,CAA9G;EACD,CARD;;AAUA,EAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACd,KAAD,EAAQe,YAAR,EAAyB;EACtD,MAAML,cAAc,GAAGK,YAAY,CAAC,KAAD,CAAnC;EACA,MAAMC,QAAQ,GAAGD,YAAY,CAAC,IAAD,CAA7B;EACA,MAAME,QAAQ,GAAGF,YAAY,CAAC,IAAD,CAA7B;EACA,MAAMG,WAAW,GAAGH,YAAY,CAAC,KAAD,CAAhC;EACA,MAAMR,QAAQ,GAAGQ,YAAY,CAAC,IAAD,CAA7B;EACA,MAAMP,WAAW,GAAGO,YAAY,CAAC,KAAD,CAAhC;EACA,MAAMI,EAAE,GAAGJ,YAAY,CAAC,IAAD,CAAvB;EAEA,SAAO;EACLK,IAAAA,OAAO,EAAEC,SADJ;EAELX,IAAAA,cAAc,EAAdA,cAFK;EAGLS,IAAAA,EAAE,EAAFA,EAHK;EAILH,IAAAA,QAAQ,EAARA,QAJK;EAKLC,IAAAA,QAAQ,EAARA,QALK;EAMLC,IAAAA,WAAW,EAAXA,WANK;EAOLX,IAAAA,QAAQ,EAARA,QAPK;EAQLe,IAAAA,aAAa,EAAED,SARV;EASLb,IAAAA,WAAW,EAAXA,WATK;EAULe,IAAAA,cAAc,EAAER,YAAY,CAACS,KAAb,CAAmB,CAAChB,WAAD,EAAcE,cAAd,EAA8BQ,WAA9B,CAAnB;EAVX,GAAP;EAYD,CArBM;AAuBP,EAAO,IAAMO,OAAO,GAAG,SAAVA,OAAU,CAAAzB,KAAK,EAAI;EAC9B,MAAI,CAACA,KAAK,CAAC0B,GAAX,EAAgB;EACd;EACD;;EACD,MAAMA,GAAG,GAAG1B,KAAK,CAAC0B,GAAlB;EACA,MAAMrB,KAAK,GAAGL,KAAK,CAACK,KAApB;EACAA,EAAAA,KAAK,CAACc,EAAN,CAASO,GAAT;EAEArB,EAAAA,KAAK,CAACE,QAAN,CAAemB,GAAG,CAACC,aAAJ,YAAsBC,OAAO,CAAC5D,IAA9B,EAAf;EACAqC,EAAAA,KAAK,CAACW,QAAN,CAAeU,GAAG,CAACC,aAAJ,YAAsBC,OAAO,CAAC1D,MAA9B,EAAf;EACAmC,EAAAA,KAAK,CAACY,QAAN,CAAeS,GAAG,CAACC,aAAJ,YAAsBC,OAAO,CAACzD,MAA9B,EAAf;EAEAkC,EAAAA,KAAK,CAACa,WAAN,CAAkBW,GAAlB,CAAsB;EAAA,WACpBzB,yBAAyB,CAACJ,KAAD,CADL;EAAA,GAAtB;;EAIA,MAAM8B,MAAM,GAAG,SAATA,MAAS,GAAM;EACnB1B,IAAAA,yBAAyB,CAACJ,KAAD,CAAzB;EACD,GAFD;;EAIAK,EAAAA,KAAK,CAACe,OAAN,GAAgB;EAAA,WACdW,yBAAW,CAAC,QAAD,EAAWD,MAAX,CADG;EAAA,GAAhB,CApB8B;;;EAyB9BE,EAAAA,uBAAS,CAAC,QAAD,EAAWF,MAAX,CAAT;EAEAA,EAAAA,MAAM;EACP,CA5BM;AA8BP,EAAO,IAAMG,SAAS,GAAG,SAAZA,SAAY,CAAAjC,KAAK;EAAA,SAC5BA,KAAK,CAACK,KAAN,CAAYe,OAAZ,EAD4B;EAAA,CAAvB;AAIP,EAAO,IAAMc,WAAW,GAAG,SAAdA,WAAc,CAAClC,KAAD,QAAwB;EAAA,MAARmC,CAAQ,QAAdC,IAAc;EACjD,MAAM/B,KAAK,GAAGL,KAAK,CAACK,KAApB;EACA,MAAMJ,KAAK,GAAGoC,yBAAW,CAACrC,KAAK,CAACC,KAAP,CAAzB;EACA,MAAM5B,UAAU,GAAG4B,KAAK,CAAC9B,MAAN,KAAiBkD,SAAjB,IAA8BpB,KAAK,CAAC7B,KAAN,KAAgBiD,SAAjE;EACA,MAAM/C,UAAU,GAAG2B,KAAK,CAAC/B,MAAN,KAAiBmD,SAAjB,IAA8BpB,KAAK,CAACqC,aAAN,KAAwBjB,SAAzE;EACA,MAAMkB,OAAO,GAAGtC,KAAK,CAACsC,OAAN,IAAiB,UAAjC;EACA,MAAMC,aAAa,GAAGD,OAAO,KAAK,QAAZ,IAAyBlE,UAAU,IAAIkE,OAAO,KAAK,UAA1B,IAAwClC,KAAK,CAACG,WAAN,EAAvF;EACA,MAAMiC,gBAAgB,GAAGF,OAAO,KAAK,QAAZ,IAAyBjE,UAAU,IAAIiE,OAAO,KAAK,UAA1B,IAAwClC,KAAK,CAACK,cAAN,EAA1F;EAEA,SAAO,SACL,EADK,EAELgC,uCAAyB,CAACzC,KAAD,EAAQ;EAAE0C,IAAAA,MAAM,EAAE,CAAC,OAAD;EAAV,GAAR,CAFpB;EAGL;EACEC,IAAAA,SAAS,EAAE,CACThB,OAAO,CAAC9D,SADC,EAETmC,KAAK,CAACrB,SAAN,GAAkBgD,OAAO,CAAChD,SAA1B,GAAsC,IAF7B,EAGT4D,aAAa,GAAGZ,OAAO,CAACjD,SAAX,GAAuB,IAH3B,EAIT8D,gBAAgB,GAAGb,OAAO,CAAClD,YAAX,GAA0B,IAJjC,EAKTL,UAAU,GAAGuD,OAAO,CAACvD,UAAX,GAAwB,IALzB,EAMTC,UAAU,GAAGsD,OAAO,CAACtD,UAAX,GAAwB,IANzB,EAOT2B,KAAK,CAAC4C,IAAN,KAAe,MAAf,GAAwB,cAAxB,GAAyC,IAPhC,EAQT5C,KAAK,CAAC4C,IAAN,KAAe,OAAf,GAAyB,eAAzB,GAA2C,IARlC,EAST5C,KAAK,CAAC2C,SAAN,IAAmB3C,KAAK,CAACkC,CAAC,CAACW,KAAH,CATf,EAUTC,IAVS,CAUJ,GAVI;EADb,GAHK,EAgBL9C,KAAK,CAAC+C,WAhBD,CAAP;EAkBD,CA3BM;AA6BP,EAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACjD,KAAD,SAAqC;EAAA,MAAjBkD,CAAiB,SAA3BC,QAA2B;EAAA,MAARhB,CAAQ,SAAdC,IAAc;EAChE,MAAM/B,KAAK,GAAGL,KAAK,CAACK,KAApB;EACA,MAAMJ,KAAK,GAAGoC,yBAAW,CAACrC,KAAK,CAACC,KAAP,CAAzB;EAEA,SAAOiD,CAAC,CAAC,KAAD,EACN;EACEN,IAAAA,SAAS,EAAE,CACThB,OAAO,CAAC3D,OADC,EAETgC,KAAK,CAACmD,IAAN,GAAaxB,OAAO,CAACyB,WAArB,GAAmC,IAF1B,EAGTN,IAHS,CAGJ,GAHI,CADb;EAKEO,IAAAA,KAAK,EAAErD,KAAK,CAACqD;EALf,GADM,EAQN,CACErD,KAAK,CAAC9B,MAAN,GACI8B,KAAK,CAAC9B,MADV,GAEI8B,KAAK,CAAC7B,KAAN,GACE8E,CAAC,CAAC,KAAD,EACD;EACEN,IAAAA,SAAS,EAAE,CACThB,OAAO,CAACzD,MADC,EAETyD,OAAO,CAACrD,eAFC,EAGTwE,IAHS,CAGJ,GAHI,CADb;EAKEQ,IAAAA,GAAG,EAAE;EALP,GADC,EAQDL,CAAC,CAAC,KAAD,EACC;EAAEN,IAAAA,SAAS,EAAEhB,OAAO,CAACxD;EAArB,GADD,EAEC6B,KAAK,CAAC7B,KAFP,CARA,CADH,GAcE,IAjBR,EAkBE8E,CAAC,CAAC,KAAD;EAEGN,IAAAA,SAAS,EAAEhB,OAAO,CAAC5D,IAFtB;EAGGuF,IAAAA,GAAG,EAAE;EAHR,KAIIpB,CAAC,CAACqB,QAJN,EAIiB,YAAM;EAClBnD,IAAAA,KAAK,CAACa,WAAN,CAAkB,IAAlB;EACAuC,IAAAA,YAAY,CAACpD,KAAK,CAACiB,aAAP,CAAZ;EACAjB,IAAAA,KAAK,CAACiB,aAAN,GAAsBoC,UAAU,CAAC,YAAM;EACrCrD,MAAAA,KAAK,CAACa,WAAN,CAAkB,KAAlB;EACD,KAF+B,EAE7Bf,sBAF6B,CAAhC;EAGD,GAVJ,GAYCF,KAAK,CAAChC,OAAN,IAAiBgC,KAAK,CAACjC,IAAvB,IAA+BiC,KAAK,CAACmD,IAZtC,CAlBH,EAgCEnD,KAAK,CAAC/B,MAAN,GACIgF,CAAC,CAAC,KAAD,EACD;EACEN,IAAAA,SAAS,EAAEhB,OAAO,CAAC1D,MADrB;EAEEqF,IAAAA,GAAG,EAAE;EAFP,GADC,EAKDtD,KAAK,CAAC/B,MALL,CADL,GAQI+B,KAAK,CAACqC,aAAN,GACEY,CAAC,CAAC,KAAD,EACD;EACEN,IAAAA,SAAS,EAAE,CACThB,OAAO,CAAC1D,MADC,EAET0D,OAAO,CAACpD,iBAFC,EAGTmF,aAAa,CAAC7E,GAHL,EAITiE,IAJS,CAIJ,GAJI,CADb;EAMEQ,IAAAA,GAAG,EAAE;EANP,GADC,EASDL,CAAC,CAAC,KAAD,EACC;EAAEN,IAAAA,SAAS,EAAEhB,OAAO,CAAC7D;EAArB,GADD,EAECkC,KAAK,CAACqC,aAFP,CATA,CADH,GAeE,IAvDR,CARM,CAAR;EAkED,CAtEM;;;;;;;;;;;;;;;;;;;;;"}